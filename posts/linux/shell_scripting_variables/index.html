<!doctype html><html lang=zh-cn><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/png sizes=96x96 href=https://zhannicholas.github.io/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=32x32 href=https://zhannicholas.github.io/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://zhannicholas.github.io/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title itemprop=name>Shell 脚本：变量 | NZ's Digital Garden</title><meta name=description content><meta property="og:title" content="Shell 脚本：变量 | NZ's Digital Garden"><meta name=twitter:title content="Shell 脚本：变量 | NZ's Digital Garden"><meta itemprop=name content="Shell 脚本：变量 | NZ's Digital Garden"><meta name=application-name content="Shell 脚本：变量 | NZ's Digital Garden"><meta property="og:site_name" content><meta property="og:type" content="website"><meta property="og:title" content="NZ's Digital Garden"><meta property="og:description" content><meta property="og:site_name" content="NZ's Digital Garden"><meta property="og:url" content="https://zhannicholas.github.io/posts/linux/shell_scripting_variables/"><meta property="og:locale" content="en"><meta property="og:image" content="/"><meta property="og:image:secure_url" content="https://zhannicholas.github.io"><meta property="og:type" content="website"><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=stylesheet href="/css/style.min.18fd6a148d228a21aa01f9bfa565483863277d2674e292f9fe859f7a8261cec6.css" integrity="sha256-GP1qFI0iiiGqAfm/pWVIOGMnfSZ04pL5/oWfeoJhzsY="></head><body class="bg-zinc-100 dark:bg-gray-800"><div class="top-0 z-50 w-full text-gray-200 bg-gray-900 border-2 border-gray-900 md:sticky border-b-stone-200/10"><div x-data="{ open: false }" class="flex flex-col max-w-full px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8"><div class="flex flex-row items-center justify-between p-4"><a href=https://zhannicholas.github.io/ class="flex text-gray-100 transition duration-1000 ease-in-out group"><div class="mt-1 text-xl font-black tracking-tight text-gray-100 uppercase transition-colors group-hover:text-gray-400/60">NZ's Digital Garden</div></a><button class="rounded-lg md:hidden focus:outline-none focus:shadow-outline" @click="open = !open" role=navigation aria-expanded=false aria-label=Main aria-controls=menuItems><svg fill="currentcolor" viewBox="0 0 20 20" class="w-6 h-6"><path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 5a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"/><path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414.0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div><nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow hidden pb-4 md:pb-0 md:flex md:justify-end md:flex-row"><div @click.away="open = false" class=relative x-data="{ open: false }"><button @click="open = !open" class="flex flex-row items-center w-full px-4 py-2 mt-2 text-sm font-semibold text-left bg-transparent rounded-lg md:w-auto md:inline md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline">
<span>The Garden</span><svg fill="currentcolor" viewBox="0 0 20 20" :class="{'rotate-180': open, 'rotate-0': !open}" class="inline w-4 h-4 mt-1 ml-1 transition-transform duration-200 transform md:-mt-1"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414.0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414.0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button><div x-show=open x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 z-30 w-full mt-2 origin-top-right rounded-md shadow-lg md:w-48"><div class="px-2 py-2 text-primary-900 bg-white rounded-md shadow"><a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/posts>Posts</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/pages>Notes</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/library>Library</a></div></div></div><a class="px-4 py-2 mt-2 text-sm font-semibold rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/now>Now</a>
<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/about>About</a>
<button id=theme-toggle type=button class="p-2 text-sm text-gray-500 rounded-lg md: dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 md:ml-2 max-w-5 xs:hidden"><svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg><svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" aria-label="Dark or Light Mode" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"/></svg></button></nav></div></div><div class=content><article><header class="max-w-2xl mx-auto mb-4 bg-primary-600"><span class=py-96><h1 class="px-6 pt-6 pb-16 mx-auto dark:prose-invert text-5xl font-black text-center text-white capitalize">Shell 脚本：变量</h1></span></header><div class="max-w-4xl mx-auto mt-8 mb-2"><div class=px-6></div></div><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[18rem] py-10 overflow-y-auto hidden xl:block"><nav><div class="flex items-center"><h2 class="pl-2 my-0 text-xl font-medium text-zinc-800 uppercase break-words">Table of Contents</h2></div><div class="absolute top-auto bottom-auto right-auto p-0 -left-4" role=menu><div class="relative z-50 max-w-sm m-4 overflow-hidden shadow-lg"><ul class="relative p-4 overflow-x-hidden overflow-y-auto overscroll-y-auto overscroll-x-auto"><li><a class="px-2 text-left text-zinc-700 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%88%9b%e5%bb%ba%e5%8f%98%e9%87%8f>创建变量</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%98%e9%87%8f%e7%9a%84%e7%b1%bb%e5%9e%8b>变量的类型</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%ae%be%e7%bd%ae%e5%8f%98%e9%87%8f%e7%9a%84%e7%b1%bb%e5%9e%8b>设置变量的类型</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%af%bc%e5%87%ba%e5%8f%98%e9%87%8f>导出变量</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e7%89%b9%e6%ae%8a%e5%8f%82%e6%95%b0special-parameters>特殊参数（Special parameters）</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#quoting-characters>Quoting characters</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%bd%ac%e4%b9%89%e5%ad%97%e7%ac%a6>转义字符（\）</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8d%95%e5%bc%95%e5%8f%b7>单引号（&rsquo;&rsquo;）</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%8c%e5%bc%95%e5%8f%b7>双引号（""）</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%82%e6%95%b0%e6%9b%bf%e6%8d%a2>参数替换</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99>参考资料</a></li></ul></div></div></nav></div><div class="max-w-2xl px-6 pt-6 pb-16 mx-auto prose dark:prose-invert dark:text-white"><p>Shell 脚本用变量（variable）来表示数据，变量仅仅只是一个标签（label），它实际上是一个引用（reference）或指针（pointer），指向着与变量相关联的实际数据所存放的内存地址。
变量的名字就是变量的值的占位符（placehoder），变量的值（value）持有着数据。引用（reference）或检索（retrive）变量的值的操作被称为变量替换（variable substitution）。</p><p>变量的名字和值是完全不同的，如果 <code>variable1</code> 是一个变量的名字，那么 <code>$variable1</code>（<code>$variable1</code> 是 <code>${variable1</code>} 的简单形式）就是对该变量值的引用。<code>$</code> 符号在这里的作用就是进行变量替换。</p><p>按照作用域的不同，变量分为全局变量（global variables）和局部变量（local variables）</p><ul><li>全局变量也就是我们通常说的环境变量（environment variables），对所有的 shell 都有效。查看环境变量的命令：<code>env</code> 或 <code>printenv</code>。</li><li>局部变量只对当前的 shell 有效。使用 shell 内置的 <code>set</code> 命令（不带任何选项参数）就可以输出所有变量（包括环境变量）和一系列的函数。</li></ul><h2 id=创建变量>创建变量</h2><p>变量名是大小写敏感的，一般用大写命名全局变量，用小写命名局部变量。变量名可以包含数字，但是不能以数字开头。定义变量的语法为：<code>VARNAME=value</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ variable1<span style=color:#f92672>=</span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo variable1
</span></span><span style=display:flex><span>variable1
</span></span><span style=display:flex><span>$ echo $variable1
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>variable1<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span></code></pre></div><p>我们经常使用 <code>echo</code> 命令输出某个变量的值。你可能会认为 <code>echo</code> 会计算出变量 <code>variable1</code> 的值，然后将值输出。但事实可不是这样，<code>echo</code> 并不知道变量的值是多少！<code>echo</code> 只负责打印我们传递给它的内容，也就是说，我们传什么给它，它就打印什么。而 shell 会在运行 <code>echo</code> 之前计算出 <code>$variable1</code> 的值，并将结果传给 <code>echo</code>。若 <code>variable1=123</code>，则当我们运行 <code>echo $variable1</code> 时，实际执行的命令是 <code>echo 123</code>。</p><p>与我们常用的编程语言不同，shell 中变量定义中的 <strong>等号两侧是不能有空格的</strong>，否则会出错。这与 shell 对命令的解释有关，例如：</p><ul><li>shell 会将 <code>VARIABLE =value</code> 当作命令 <code>VARIABLE</code> 运行，它有一个参数 <code>=value</code></li><li>shell 会将 <code>VARIABLE= value</code> 当作命令 <code>value</code> 运行，并且认为有一个值为 <code>""</code> 的环境变量 <code>VARIABLE</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ VARIABLE<span style=color:#f92672>=</span> value
</span></span><span style=display:flex><span>value: command not found
</span></span><span style=display:flex><span>$ VARIABLE <span style=color:#f92672>=</span>value
</span></span><span style=display:flex><span>VARIABLE: command not found
</span></span><span style=display:flex><span>$ VARIABLE <span style=color:#f92672>=</span> value
</span></span><span style=display:flex><span>VARIABLE: command not found
</span></span></code></pre></div><p>从技术的角度来说，变量的名字因出现在赋值语句的左边而被称为 <code>lvalue</code>，变量的值因出现在赋值语句的右边而被称为 <code>rvalue</code>。</p><h2 id=变量的类型>变量的类型</h2><p>Bash 并不像其它编程语言那样看重变量的类型。Bash 变量本质上都是字符串，但是根据上下文的不同，如果bash 也是允许在变量上进行算术运算和比较操作的。</p><p>如果变量的值只包含数字，那么我们是可以在它上面进行正常的算术运算的。如果变量的值为 <code>null</code> 或包含数字以外的字符，在它上面进行算术运算时，变量的值会被当做整数 0。</p><h3 id=设置变量的类型>设置变量的类型</h3><p>如果我们硬是要指定变量的类型，也是可以的。Shell 内置的 <code>declare</code> 和 <code>typeset</code> 命令都可以设置变量的值和属性，这两个命令是同义词（synonym）。<code>declare</code> 语句的语法为：<code>declare OPTION(s) VARIABLE=value</code>，它支持的选项可以用 <code>man</code> 命令查看。</p><h2 id=导出变量>导出变量</h2><p>在 shell 中创建的变量只对当前 shell 有效，它们都是局部变量。如果我们在当前 shell 中使用 bash 或类似的命令开启一个子 shell，父 shell 中定义的变量是不可用的。要将变量传递到子 shell 中，我们可以使用 <code>export</code> 命令导出变量，导出后的变量就会被当作环境变量对待。</p><h2 id=特殊参数special-parameters>特殊参数（Special parameters）</h2><p>从命令行传递给脚本的参数用：<code>$0,$1,$2,$3...</code> 表示。其中，<code>$0</code> 时脚本本身的名字，<code>$1</code> 是第一个参数，<code>$2</code> 是第二个参数，依次类推。<code>$9</code> 之后的参数必须用大括号包裹起来，例如：<code>${10}</code>。这些参数由于和出现位置有关，所以被称为位置参数（positional parameters）。特殊变量 <code>$*</code> 和 <code>$@</code> 表示所有的参数。</p><h2 id=quoting-characters>Quoting characters</h2><p>在有些上下文中，很多字符或者单词都有特殊的含义，用特殊符号将它们引起来可以消除这些特殊含义。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ a<span style=color:#f92672>=</span><span style=color:#ae81ff>123</span>
</span></span></code></pre></div><h3 id=转义字符>转义字符（\）</h3><p>转义字符（Escape characters）用来移除其后 <strong>单个字符</strong> 的特殊含义。Bash 中的转义字符是反斜杠（\）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#ae81ff>\$</span>a
</span></span><span style=display:flex><span>$a
</span></span><span style=display:flex><span>$ echo <span style=color:#ae81ff>\$</span><span style=color:#f92672>{</span>a<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>a<span style=color:#e6db74>}</span>
</span></span></code></pre></div><p>转义符在行尾（对换行符进行转义）时，表示当前行的命令还未写完。所以，转义符有时候又被称为行连续字符（line continuation character）。我们可以通过这种方式写出可读性更强的长命令，例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo foo<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; bar
</span></span><span style=display:flex><span>foobar
</span></span></code></pre></div><h3 id=单引号>单引号（&rsquo;&rsquo;）</h3><p>将变量的引用放在单引号中（&rsquo;…&rsquo;）就会让变量名被当作字面值处理，即不会发生变量替换，所以单引号被称为“full quoting”，有时又称“strong quoting”。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;$a&#39;</span>
</span></span><span style=display:flex><span>$a
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#39;${a}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>a<span style=color:#e6db74>}</span>
</span></span></code></pre></div><p>单引号（Single quotes）被用来移除两个单引号之间 <strong>所有字符</strong> 的特殊含义，即单引号中的所有字符都是字面值（literal value）。两个单引号之间是不能有单引号的，即便这个单引号被转义都不行。</p><h3 id=双引号>双引号（""）</h3><p>将变量的引用放在双引号中（"…"）并不会对变量替换造成影响，所以双引号被称为“partial quoting”，有时又称“weak quoting”。</p><p>双引号（Double quotes）会移除两个双引号之间除美元符号（$）、反引号（`）和反斜杠（\）之外的所有字符的特殊含义。美元符号和反引号的特殊含义在双引号之间会保留，而反斜杠只有在其后的字符是美元符号、反引号、双引号、反斜杠或换行符时才保留特殊含义，输入流会将这些字符前的反斜杠去掉。双引号之间是可以有由反斜杠转义的双引号的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;</span>$a<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>a<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span></code></pre></div><p>双引号还可以保留变量值中的空白符，防止 shell 在解释命令时去掉多余的空白符。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ hello<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;A B  C   D&#34;</span>
</span></span><span style=display:flex><span>echo $hello
</span></span><span style=display:flex><span>A B C D
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$hello<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>A B  C   D
</span></span></code></pre></div><h2 id=参数替换>参数替换</h2><p><code>${parameter}</code>：获取变量 <code>parameter</code> 的值，同 <code>$parameter</code>，但是前者的含义更加明确</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ param<span style=color:#f92672>=</span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span></code></pre></div><p><code>${parameter-default}</code> 或 <code>${parameter:-default}</code>：如果参数 <code>parameter</code> 未设置，则使用 <code>default</code> 作为结果，但不会将 <code>default</code> 赋值给 <code>parameter</code>。<code>:</code> 的作用是：如果 <code>parameter</code> 已声明且值为 <code>null</code>，则使用 <code>default</code>。若没有 <code>:</code>，则只要 <code>parameter</code> 已声明，就不会使用 <code>default</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param-1<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param<span style=color:#66d9ef>:-</span>1<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>123</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param1-1<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param2<span style=color:#66d9ef>:-</span>2<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>$ param3<span style=color:#f92672>=</span>  <span style=color:#75715e># param3 is declared, but is null</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param3<span style=color:#66d9ef>:-</span>3<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param3-3<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param3<span style=color:#e6db74>}</span>
</span></span></code></pre></div><p><code>${parameter=default}</code> 和 <code>${parameter:=default}</code>：如果 <code>parameter</code> 未设置，则使用 <code>default</code> 并将其赋值给 <code>parameter</code>。这里 <code>:</code> 的含义与 <code>${parameter:-default}</code> 中的 <code>:</code> 类似。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ param4<span style=color:#f92672>=</span>  <span style=color:#75715e># param4 is declared, but is null</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param4:=4<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param5=5<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>${</span>param5<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span></code></pre></div><p><code>${parameter+alt_value}</code> 和 <code>${parameter:+alt_value}</code>：如果 <code>parameter</code> 已设置，则使用 <code>alt_value</code> 但不进行赋值，否则使用 <code>null</code>。</p><p><code>${parameter?err_msg}</code> 和 <code>${parameter:?err_msg}</code>：如果 <code>parameter</code> 已设置，则使用它，否则打印 <code>err_msg</code> 并终止脚本执行。</p><p><code>${#var}</code>：计算字符串 <code>var</code> 的长度，或数组 <code>var</code> 中第一个元素的长度。</p><p><code>${var#Pattern}</code> 和 <code>${var##Pattern}</code>：从 <code>$var</code> 首部开始移除 <code>$Pattern</code> 最短（<code>#</code>）或最长（<code>##</code>）匹配上的部分。</p><p><code>${var%Pattern}</code> 和 <code>${var%%Pattern}</code>：从 <code>$var</code> 尾部开始移除 <code>$Pattern</code> 最短（<code>%</code>）或最长（<code>%%</code>）匹配上的部分。</p><p><code>${var:pos}</code>：从偏移量 <code>pos</code> 处（即跳过 <code>pos</code> 个字符）展开 <code>$var</code>。</p><p><code>${var:pos:len}</code>：从偏移量 <code>pos</code> 处展开最大长度为 <code>len</code> 个字符。</p><p><code>${var/Pattern/Replacement}</code>：使用 <code>Replacement</code> 替换 <code>var</code> 中第一个匹配上 <code>Pattern</code> 的部分。</p><p><code>${var//Pattern/Replacement}</code>：使用 <code>Replacement</code> 替换 <code>var</code> 中所有匹配上 <code>Pattern</code> 的部分。</p><p><code>${var/#Pattern/Replacement}</code>：若 <code>var</code> 的前缀匹配上了 <code>Pattern</code>，则使用 <code>Replacement</code> 替换 <code>Pattern</code>。</p><p><code>${var/%Pattern/Replacement}</code>：若 <code>var</code> 的后缀匹配上了 <code>Pattern</code>，则使用 <code>Replacement</code> 替换 <code>Pattern</code>。</p><p><code>${!varprefix*}</code> 和 <code>${!varprefix@}</code>：筛选出所有名字以 <code>varprefix</code> 开头的已声明的变量。</p><h2 id=参考资料>参考资料</h2><ol><li><a href=https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html target=_blank>Bash Guide for Beginners</a>
.</li><li><a href=https://tldp.org/LDP/abs/html/index.html target=_blank>Advanced Bash-Scripting Guide</a>
.</li><li><a href=https://www.gnu.org/software/bash/manual/html_node/ target=_blank>Bash Reference Manual</a>
.</li></ol></div><hr><aside><h4>No linked references</h4></aside><br><aside class=related><h3 class="text-2xl font-black tracking-tight text-primary-500 capitalize dark:text-primary-300 sm:text-2xl">Related Content</h3><ul><p class="inline-flex items-center rounded-md bg-gray-300 hover:bg-primary-200 hover:text-black px-2.5 py-0.5 text-sm font-medium text-gray-900 capitalize"><a style=color:var(--link) href=https://zhannicholas.github.io/posts/linux/shell_scripting_introduction>Shell 脚本</a></p></ul></aside></article></div><div x-cloak x-data="{ atTop: false }"><button id=scrollToTop name="scroll to top button" aria-label="scroll to top button" class="fixed z-50 w-10 h-10 font-bold text-center text-white transition-all duration-1000 ease-in-out transform bg-violet-600 rounded-full cursor-pointer animate-bounce bottom-24 right-8 focus:outline-none" :class="{ 'opacity-0 translate-y-24': !atTop, 'opacity-1 translate-y-2' :  atTop}" @click="window.scrollTo({ top: 0, behavior: 'smooth'})" @scroll.window="atTop = (window.pageYOffset > 200)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0 3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"/></svg></button></div><script src=https://zhannicholas.github.io/js/alpine.js defer></script>
<script src=https://zhannicholas.github.io/js/darkmode.js defer></script><footer class=bg-gray-900><div class="max-w-md px-4 py-12 mx-auto overflow-hidden sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8"><nav class="flex flex-wrap justify-center -mx-5 -my-2" aria-label=Footer><div class="px-5 py-2"><a href=https://zhannicholas.github.io/about class="text-base text-gray-400 hover:text-gray-300">About</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/posts class="text-base text-gray-400 hover:text-gray-300">Posts</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/pages class="text-base text-gray-400 hover:text-gray-300">Notes</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/library class="text-base text-gray-400 hover:text-gray-300">Library</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/contact/ class="text-base text-gray-400 hover:text-gray-300">Contact</a></div></nav><div class="flex justify-center mt-2 space-x-6"><a href=https://github.com/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>GitHub</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483.0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951.0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65.0.0.84-.27 2.75 1.026A9.564 9.564.0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688.0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855.0 1.338-.012 2.419-.012 2.747.0.268.18.58.688.482A10.019 10.019.0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg></a>
<a href=mailto:zhan_nicholas@outlook.com class="text-gray-400 hover:text-gray-300"><span class=sr-only>Email</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M21 7.38246601V5H3V7.38199365l9.0000224 4.50046115L21 7.38246601zm0 2.23606798-9.0000224 4.50001121L3 9.61810635V19H21V9.61853399zM3 3H21c1.1045695.0 2 .8954305 2 2V19c0 1.1045695-.8954305 2-2 2H3c-1.1045695.0-2-.8954305-2-2V5c0-1.1045695.8954305-2 2-2z" clip-rule="evenodd"/></svg></a>
<a href=https://t.me/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>Telegram</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.78754 14.0196C5.83131 14.0344 5.87549 14.0448 5.91963 14.0512 5.96777 14.1644 6.02996 14.3107 6.10252 14.4818c.17707.4176.41566.9825.66194 1.5717C7.2667 17.2552 7.77332 18.4939 7.88521 18.8485 8.02372 19.2868 8.17013 19.5848 8.32996 19.7883 8.4126 19.8935 8.50819 19.9853 8.62003 20.0549 8.67633 20.0899 8.7358 20.1186 8.79788 20.14 8.80062 20.141 8.80335 20.1419 8.80608 20.1428 9.1261 20.2636 9.41786 20.2133 9.60053 20.1518 9.69827 20.1188 9.77735 20.0791 9.8334 20.0469 9.86198 20.0304 9.88612 20.0151 9.90538 20.0021L9.90992 19.9991l2.82618-1.7625 3.2646 2.5028C16.0488 20.7763 16.1014 20.8073 16.157 20.8316 16.5492 21.0027 16.929 21.0624 17.2862 21.0136 17.6429 20.9649 17.926 20.8151 18.1368 20.6464 18.3432 20.4813 18.4832 20.2963 18.5703 20.1589 18.6148 20.0887 18.6482 20.0266 18.6718 19.9791 18.6836 19.9552 18.6931 19.9346 18.7005 19.9181L18.7099 19.8963 18.7135 19.8877 18.715 19.8841 18.7156 19.8824 18.7163 19.8808C18.7334 19.8379 18.7466 19.7935 18.7556 19.7482L21.7358 4.72274C21.7453 4.67469 21.7501 4.62581 21.7501 4.57682 21.7501 4.13681 21.5843 3.71841 21.1945 3.46452 20.8613 3.24752 20.4901 3.23818 20.2556 3.25598 20.0025 3.27519 19.7688 3.33766 19.612 3.38757 19.5304 3.41355 19.4619 3.43861 19.4126 3.45773 19.3878 3.46734 19.3675 3.47559 19.3523 3.48188L19.341 3.48666 2.62725 10.0432 2.62509 10.044C2.61444 10.0479 2.60076 10.053 2.58451 10.0593 2.55215 10.0719 2.50878 10.0896 2.45813 10.1126 2.35935 10.1574 2.22077 10.2273 2.07856 10.3247c-.22719.1556-.74968.5817-.6617 1.285.07019.5611.45457.9057.68876 1.0714C2.23421 12.7721 2.35638 12.8371 2.44535 12.8795 2.48662 12.8991 2.57232 12.9339 2.6095 12.9491L2.61889 12.9529l3.16865 1.0667zM19.9259 4.86786 19.9236 4.86888C19.9152 4.8725 19.9069 4.87596 19.8984 4.87928L3.1644 11.4438C3.15566 11.4472 3.14686 11.4505 3.138 11.4536L3.12869 11.4571C3.11798 11.4613 3.09996 11.4686 3.07734 11.4788 3.06451 11.4846 3.05112 11.491 3.03747 11.4978 3.05622 11.5084 3.07417 11.5175 3.09012 11.5251 3.10543 11.5324 3.11711 11.5374 3.1235 11.54l3.14263 1.058C6.32365 12.6174 6.37727 12.643 6.42649 12.674L16.8033 6.59948 16.813 6.59374C16.8205 6.58927 16.8305 6.58353 16.8424 6.5768 16.866 6.56345 16.8984 6.54568 16.937 6.52603 17.009 6.48938 17.1243 6.43497 17.2541 6.39485 17.3444 6.36692 17.6109 6.28823 17.899 6.38064 18.0768 6.43767 18.2609 6.56028 18.3807 6.76798 18.4401 6.87117 18.4718 6.97483 18.4872 7.06972 18.528 7.2192 18.5215 7.36681 18.4896 7.49424 18.4208 7.76875 18.228 7.98287 18.0525 8.14665 17.9021 8.28706 15.9567 10.1629 14.0376 12.0147 13.0805 12.9381 12.1333 13.8525 11.4252 14.5359l-.465.449 5.8719 4.5018C16.9668 19.5349 17.0464 19.5325 17.0832 19.5274 17.1271 19.5214 17.163 19.5045 17.1997 19.4752 17.2407 19.4424 17.2766 19.398 17.3034 19.3557L17.3045 19.354 20.195 4.78102C20.1521 4.79133 20.1087 4.80361 20.0669 4.81691 20.0196 4.83198 19.9805 4.84634 19.9547 4.85637 19.9418 4.86134 19.9326 4.86511 19.9276 4.86719L19.9259 4.86786zM11.4646 17.2618 10.2931 16.3636 10.0093 18.1693 11.4646 17.2618zM9.21846 14.5814l1.16494-1.1247c.7081-.6835 1.6555-1.5979 2.6127-2.5215l.9725-.9382-6.52007 3.8168L7.48351 13.8963c.1777.4191.41736.9864.664940000000001 1.5788.185129999999999.4429.37872.9093.55504 1.3411l.28304-1.8004C9.01381 14.8422 9.09861 14.692 9.21846 14.5814z" clip-rule="evenodd"/></svg></a></div><p class="mt-2 text-base text-center text-gray-400">2018-2023 &copy; Nicholas Zhan. Licensed under <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>CC BY-NC 4.0</a>.</p><p class="mt-2 text-base text-center text-gray-400">Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://github.com/sawhney17/logseq-schrodinger>logseq-schrodinger</a>.</p></div></footer></body></html>