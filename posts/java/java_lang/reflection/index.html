<!doctype html><html lang=zh-cn dir=auto><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="反射(Reflection) 是Java语言的一大特性，它允许Java程序在运行过程中获取自身的相关信息，还能改变程序的内部属性。我们可以使用">
<meta name=theme-color content="#ffcd00">
<meta property="og:title" content="反射 • Nicholas Zhan">
<meta property="og:description" content="反射(Reflection) 是Java语言的一大特性，它允许Java程序在运行过程中获取自身的相关信息，还能改变程序的内部属性。我们可以使用">
<meta property="og:url" content="https://zhannicholas.github.io/posts/java/java_lang/reflection/">
<meta property="og:site_name" content="Nicholas Zhan">
<meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/85f2cc2a45fd9533b91a65214224f9d7?s=256"><meta property="article:section" content="posts"><meta property="article:tag" content="Java"><meta property="article:published_time" content="2020-12-13T18:22:56+08:00"><meta property="article:modified_time" content="2020-12-13T18:22:56+08:00"><meta name=twitter:card content="summary">
<meta name=generator content="Hugo 0.87.0">
<title>反射 • Nicholas Zhan</title>
<link rel=canonical href=https://zhannicholas.github.io/posts/java/java_lang/reflection/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style>
</head>
<body class="page type-posts has-sidebar">
<div class=site><div id=sidebar class=sidebar>
<a class=screen-reader-text href=#main-menu>跳到主菜单</a>
<div class=container><section class="widget widget-about sep-after">
<header>
<div class=logo>
<a href=/>
<img src=/images/logo.png>
</a>
</div>
<h2 class="title site-title">
<a href=/>
Nicholas Zhan
</a>
</h2>
<div class=desc>
Java Developer, Runner, Cyclist
</div>
</header>
</section>
<section class="widget widget-search sep-after">
<header>
<h4 class="title widget-title">搜索</h4>
</header>
<form action=/search id=search-form class=search-form>
<label>
<span class=screen-reader-text>搜索</span>
<input id=search-term class=search-term type=search name=q placeholder=搜索&mldr;>
</label></form>
</section>
<section class="widget widget-sidebar_menu sep-after"><nav id=sidebar-menu class="menu sidebar-menu" aria-label=侧边栏菜单>
<div class=container>
<ul><li class="item has-children has-current">
<a href=/posts/java/>Java</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/posts/java/jakartaee/>Jakarta EE</a></li><li class=item>
<a href=/posts/java/jvm/>JVM</a></li><li class=item>
<a href=/posts/java/concurrency/>并发</a></li></ul></li><li class=item>
<a href=/posts/distributed_computing/>分布式计算</a></li><li class="item has-children">
<a href=/posts/operating_systems/>操作系统</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/posts/operating_systems/memory_management/>内存管理</a></li><li class=item>
<a href=/posts/operating_systems/virtualization/>虚拟化</a></li><li class=item>
<a href=/posts/operating_systems/processes_management/>进程管理</a></li></ul></li><li class="item has-children">
<a href=/posts/databases/>数据库</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/posts/databases/redis/>Redis</a></li><li class=item>
<a href=/posts/databases/fundamentals/>基础理论</a></li></ul></li><li class="item has-children">
<a href=/posts/computer_networks/>计算机网络</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/posts/computer_networks/http/>HTTP</a></li><li class=item>
<a href=/posts/computer_networks/fundamentals/>基础知识</a></li></ul></li></ul>
</div>
</nav>
</section><section class="widget widget-taxonomy_cloud sep-after">
<header>
<h4 class="title widget-title">标签</h4>
</header>
<div class="container list-container">
<ul class="list taxonomy-cloud"><li>
<a href=/tags/c%E7%AE%97%E6%B3%95/ style=font-size:1.4166666666666665em>C算法</a>
</li><li>
<a href=/tags/english/ style=font-size:1em>English</a>
</li><li>
<a href=/tags/gc/ style=font-size:1em>GC</a>
</li><li>
<a href=/tags/git/ style=font-size:1em>Git</a>
</li><li>
<a href=/tags/http/ style=font-size:1.5833333333333333em>HTTP</a>
</li><li>
<a href=/tags/hugo/ style=font-size:1em>Hugo</a>
</li><li>
<a href=/tags/jakartaee/ style=font-size:1.1666666666666667em>JakartaEE</a>
</li><li>
<a href=/tags/java/ style=font-size:1.8333333333333333em>Java</a>
</li><li>
<a href=/tags/jdbc/ style=font-size:1em>JDBC</a>
</li><li>
<a href=/tags/jvm/ style=font-size:1.25em>JVM</a>
</li><li>
<a href=/tags/leetcode/ style=font-size:1.1666666666666667em>Leetcode</a>
</li><li>
<a href=/tags/life/ style=font-size:1em>Life</a>
</li><li>
<a href=/tags/linux/ style=font-size:1.25em>Linux</a>
</li><li>
<a href=/tags/mybatis/ style=font-size:1em>MyBatis</a>
</li><li>
<a href=/tags/networks/ style=font-size:1.1666666666666667em>Networks</a>
</li><li>
<a href=/tags/os/ style=font-size:1.5em>OS</a>
</li><li>
<a href=/tags/ostep/ style=font-size:1.1666666666666667em>OSTEP</a>
</li><li>
<a href=/tags/python/ style=font-size:1em>Python</a>
</li><li>
<a href=/tags/redis/ style=font-size:1.5em>Redis</a>
</li><li>
<a href=/tags/sicp/ style=font-size:1em>SICP</a>
</li><li>
<a href=/tags/tomcat/ style=font-size:1em>Tomcat</a>
</li><li>
<a href=/tags/zookeeper/ style=font-size:1em>ZooKeeper</a>
</li><li>
<a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/ style=font-size:1.0833333333333333em>分布式计算</a>
</li><li>
<a href=/tags/%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF/ style=font-size:1.0833333333333333em>多处理器编程的艺术</a>
</li><li>
<a href=/tags/%E5%B7%A5%E7%A8%8B%E6%80%9D%E7%BB%B4/ style=font-size:1em>工程思维</a>
</li><li>
<a href=/tags/%E5%B9%B6%E5%8F%91/ style=font-size:1.3333333333333333em>并发</a>
</li><li>
<a href=/tags/%E6%90%9C%E7%B4%A2/ style=font-size:1em>搜索</a>
</li><li>
<a href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/ style=font-size:1.0833333333333333em>数据库</a>
</li><li>
<a href=/tags/%E6%B8%B8%E8%AE%B0/ style=font-size:1em>游记</a>
</li><li>
<a href=/tags/%E7%8E%B0%E4%BB%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ style=font-size:1.0833333333333333em>现代操作系统</a>
</li><li>
<a href=/tags/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/ style=font-size:1em>生产者消费者</a>
</li><li>
<a href=/tags/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/ style=font-size:1.25em>算法导论</a>
</li><li>
<a href=/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/ style=font-size:1em>设计原则</a>
</li><li>
<a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ style=font-size:2em>设计模式</a>
</li></ul>
</div>
</section>
</div>
<div class=sidebar-overlay></div>
</div><div class=main><nav id=main-menu class="menu main-menu" aria-label=主菜单>
<div class=container>
<a class=screen-reader-text href=#content>跳到内容</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</span>
<span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</span>
</button>
<ul><li class=item>
<a href=/>主页</a>
</li><li class="item current">
<a aria-current=page href=/posts/>博客</a>
</li><li class=item>
<a href=/notebook/>笔记本</a>
</li><li class=item>
<a href=/itinerary/>游山玩水</a>
</li></ul>
</div>
</nav><div class=header-widgets>
<div class=container>
<style>.widget-breadcrumbs li:after{content:'\2f '}</style>
<section class="widget widget-breadcrumbs sep-after">
<nav id=breadcrumbs>
<ol><li><a href=/>主页</a></li><li><a href=/posts/>博客</a></li><li><a href=/posts/java/>Java</a></li><li><span>反射</span></li></ol>
</nav>
</section></div>
</div>
<header id=header class="header site-header">
<div class="container sep-after">
<div class=header-info><p class="site-title title">Nicholas Zhan</p><p class="desc site-desc">Java Developer, Runner, Cyclist</p>
</div>
</div>
</header>
<main id=content>
<article lang=zh-cn class=entry>
<header class="header entry-header">
<div class="container sep-after">
<div class=header-info>
<h1 class=title>反射</h1>
</div>
<div class=entry-meta>
<span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span class=screen-reader-text>Posted on </span>
<time class=entry-date datetime=2020-12-13T18:22:56+08:00>2020, Dec 13</time>
</span>
<span class=byline><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M21 21V20c0-2.76-4-5-9-5s-9 2.24-9 5v1"/><path d="M16 6.37A4 4 0 1112.63 3 4 4 0 0116 6.37z"/></svg>
<span class=screen-reader-text> by </span><a href=/authors/zhannicholas>Nicholas Zhan</a></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>
12 mins read
</span>
</div>
</div>
</header>
<details class="container entry-toc">
<summary class=title>
<span>目录</span>
</summary>
<nav id=TableOfContents>
<ul>
<li><a href=#获取class对象>获取<code>Class</code>对象</a>
<ul>
<li><a href=#直接获取>直接获取</a></li>
<li><a href=#使用-object类的getclass方法>使用 **<code>Object</code>**类的<code>getClass()</code>方法</a></li>
<li><a href=#使用-class类的静态fornamestring-classname方法>使用 **<code>Class</code>**类的静态<code>forName(String className)</code>方法</a></li>
</ul>
</li>
<li><a href=#获取类信息>获取类信息</a>
<ul>
<li><a href=#获取包信息>获取包信息</a></li>
<li><a href=#获取类名>获取类名</a></li>
<li><a href=#获取修饰符>获取修饰符</a></li>
<li><a href=#获取父类>获取父类</a></li>
<li><a href=#获取类直接实现的接口>获取类直接实现的接口</a></li>
<li><a href=#获取注解>获取注解</a></li>
<li><a href=#获取泛型参数>获取泛型参数</a></li>
<li><a href=#获取构造函数信息>获取构造函数信息</a></li>
<li><a href=#获取字段信息>获取字段信息</a></li>
<li><a href=#获取方法信息>获取方法信息</a></li>
</ul>
</li>
<li><a href=#创建新实例>创建新实例</a></li>
<li><a href=#操作数组>操作数组</a></li>
<li><a href=#调用对象方法>调用对象方法</a></li>
<li><a href=#修改字段值>修改字段值</a></li>
<li><a href=#参考资料>参考资料</a></li>
</ul>
</nav>
</details>
<div class="container entry-content">
<p><strong>反射(Reflection)</strong> 是Java语言的一大特性，它允许Java程序在运行过程中获取自身的相关信息，还能改变程序的内部属性。我们可以使用反射获取类、接口、字段、方法的属性，也可以用反射来实例化一个对象、进行方法调用、获取或修改字段的值。</p>
<p>以下是Oracle官方对反射的解释：</p>
<blockquote>
<p>Reflection enables Java code to discover information about the fields, methods and constructors of loaded classes, and to use reflected fields, methods, and constructors to operate on their underlying counterparts, within security restrictions.</p>
</blockquote>
<h2 id=获取class对象>获取<code>Class</code>对象</h2>
<p>Java中共有两种类型：<strong>引用类型</strong>和 <strong>基本类型</strong>。引用类型包括：类、数组(类和数组都继承自 <strong><code>java.lang.Object</code></strong>)和接口。基本类型包括：<code>boolean</code>、<code>byte</code>、<code>short</code>、<code>char</code>、<code>int</code>、<code>long</code>、<code>float</code>、<code>double</code>。
当Java程序运行时，JVM会为每种类型实例化一个不可变的 **<code>java.lang.Class</code>**类，实例的很多数据都来自对应的 **<code>.class</code><strong>文件。</strong><code>java.lang.Class</code>**是反射API的入口，它不仅提供了获取及修改对象内部信息方法，还提供了世袭化对象的途径。有三种方式可以获取到 **<code>Class</code>**实例的引用：直接获取、使用 **<code>Object</code>**类的<code>getClass()</code>方法和使用 **<code>Class</code>**类的静态<code>forName(String className)</code>方法。</p>
<h3 id=直接获取>直接获取</h3>
<p>对于 **<code>A</code>**类，我们可以直接使用 **<code>A.class</code>**来获取它对应的 **<code>Class</code>**对象，这也适用于基本类型。对于包装类，其内部的静态<code>final</code>变量 **<code>TYPE</code>**与对应基本类型的 **<code>Class</code>**对象是同一个。例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>Class<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;</span> objectClass <span style=color:#f92672>=</span> Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>==</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>TYPE</span><span style=color:#f92672>);</span>  <span style=color:#75715e>// true
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>==</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span> <span style=color:#75715e>// false
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>==</span> Void<span style=color:#f92672>.</span><span style=color:#a6e22e>TYPE</span><span style=color:#f92672>);</span>    <span style=color:#75715e>// true
</span></code></pre></div><h3 id=使用-object类的getclass方法>使用 **<code>Object</code>**类的<code>getClass()</code>方法</h3>
<p>**<code>Object</code>**类有一个<code>getClass()</code>方法，它返回对象实例引用的 **<code>Class</code>**对象：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>Class<span style=color:#f92672>&lt;?&gt;</span> objectClass <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>().</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=使用-class类的静态fornamestring-classname方法>使用 **<code>Class</code>**类的静态<code>forName(String className)</code>方法</h3>
<p>**<code>Class</code>**类的静态<code>forName(String className)</code>方法会尝试返回虚拟机内<code>className</code>对应的 **<code>Class</code>**类对象的引用。例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>Class<span style=color:#f92672>&lt;?&gt;</span> objectClass <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;java.lang.Object&#34;</span><span style=color:#f92672>);</span>
</code></pre></div><p>不管采取何种方式获取一个给定类型的 **<code>Class</code>**对象引用，返回的引用(如果存在的话)都是同一个。例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>().</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>());</span>    <span style=color:#75715e>// true
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>==</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;java.lang.Object&#34;</span><span style=color:#f92672>));</span>  <span style=color:#75715e>// true
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Object<span style=color:#f92672>().</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;java.lang.Object&#34;</span><span style=color:#f92672>));</span>   <span style=color:#75715e>// true
</span></code></pre></div><h2 id=获取类信息>获取类信息</h2>
<p>我们可以使用反射来获取类的信息，例如包名、类名、类型、访问修饰符等。</p>
<p>现在有一个 **<code>User</code>**类，其定义如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#f92672>package</span> ml.zhannicholas.reflection<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.io.Serializable<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.UUID<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#66d9ef>implements</span> Cloneable<span style=color:#f92672>,</span> Serializable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>protected</span> String uuid<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>protected</span> String name<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>protected</span> String email<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Address</span> <span style=color:#f92672>{}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>()</span> <span style=color:#f92672>{}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>(</span>name<span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>


    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> String email<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>uuid</span> <span style=color:#f92672>=</span> UUID<span style=color:#f92672>.</span><span style=color:#a6e22e>randomUUID</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>email</span> <span style=color:#f92672>=</span> email<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> Object <span style=color:#a6e22e>clone</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> CloneNotSupportedException <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>clone</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>// getter and setter methods
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>

</code></pre></div><p>**<code>ActiveUser</code>**是 **<code>User</code>**类的一个子类：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ActiveUser</span> <span style=color:#66d9ef>extends</span> User <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> String approach<span style=color:#f92672>;</span>

    <span style=color:#75715e>// getter and setter methods
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</code></pre></div><p>后面会使用反射获取这些类的信息。</p>
<h3 id=获取包信息>获取包信息</h3>
<p>简单的获取包名：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>String packageName <span style=color:#f92672>=</span> userClass<span style=color:#f92672>.</span><span style=color:#a6e22e>getPackageName</span><span style=color:#f92672>();</span>    <span style=color:#75715e>// ml.zhannicholas.reflection
</span></code></pre></div><p>获取 **<code>Package</code>**对象：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>Package <span style=color:#f92672>package</span> <span style=color:#960050;background-color:#1e0010>= </span>userClass.getPackage<span style=color:#f92672>();</span>
</code></pre></div><p>**<code>Package</code>**对象包含了包的元数据，比如包名、版本号等。</p>
<h3 id=获取类名>获取类名</h3>
<p>**<code>Class</code>**类提供了四个获取类名的方法，不同方法的返回值稍有差别：
获取类的<code>simple name</code>(不含包名):</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>
</code></pre></div><p>获取类的<code>name</code>(含包名):</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>
</code></pre></div><p>获取类的规范名(<code>canonical name</code>)：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>
</code></pre></div><p>获取对应类型的名字(<code>type name</code>)：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>
</code></pre></div><h4 id=基本类型和void>基本类型和<code>void</code></h4>
<p>对于原始类型和<code>void</code>，四种方法返回的结果相同：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// int
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>        <span style=color:#75715e>// int
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>    <span style=color:#75715e>// int
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// int
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// void
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>        <span style=color:#75715e>// void
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>    <span style=color:#75715e>// void
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// void
</span></code></pre></div><h4 id=对象类型>对象类型</h4>
<p>对于普通的Java对象，<code>getSimpleName()</code>返回简单的类名，其它三个方法的返回值和类的规范名相同：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span> <span style=color:#75715e>// User
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// ml.zhannicholas.reflection.User
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.User  
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.User
</span></code></pre></div><h4 id=内部类>内部类</h4>
<p>对于四种内部类，以上几种方法的返回值略有差异。</p>
<h5 id=静态内部类和非静态成员类>静态内部类和非静态成员类</h5>
<p>对于静态内部类(<code>nested classes</code>)和非静态成员类(<code>inner class</code>)，<code>getSimpleName()</code>返回简单的类名，<code>getCanonicalName()</code>返回类的规范名，而<code>getName()</code>和<code>getTypeName()</code>返回的结果相同，为<code>$</code>连接的外部类的规范名和内部类的简单名：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>User<span style=color:#f92672>.</span><span style=color:#a6e22e>Address</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span> <span style=color:#75715e>// Address
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>Address</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// ml.zhannicholas.reflection.User$Address
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>Address</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.User$Address  
</span><span style=color:#75715e></span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>Address</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.User.Address
</span></code></pre></div><h5 id=匿名类>匿名类</h5>
<p>对于匿名类(<code>anonymouse classes</code>)，<code>getCanonicalName()</code>方法会返回<code>null</code>，<code>getSimpleName()</code>返回一个空字符串。<code>getName()</code>和<code>getTypeName()</code>返回的结果由三部分组成，从左到右分别是：外部类的规范名、$和该匿名类在所有匿名类中出现的位置(从1开始)：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#f92672>package</span> ml.zhannicholas.reflecton<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectionTest</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(){}.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>    <span style=color:#75715e>// 空字符串
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(){}.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.ReflectionTest$2
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(){}.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>  <span style=color:#75715e>// ml.zhannicholas.reflection.ReflectionTest$3
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(){}.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>()</span>  <span style=color:#75715e>// null
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=局部类>局部类</h5>
<p>对于局部类(<code>local classes</code>)，<code>getCanonicalName()</code>方法会返回<code>null</code>，<code>getSimpleName()</code>返回简单的类名。<code>getName()</code>和<code>getTypeName()</code>返回的结果由四部分组成，从左到右分别是：外部类的规范名、$、该局部类在所有同名局部类中出现的位置(从1开始)和局部类的简单名：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#f92672>package</span> ml.zhannicholas.reflection<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectionTest</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        testLocalClasses2<span style=color:#f92672>();</span>
        testLocalClasses1<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testLocalClasses1</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;local classes test1: &#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalClass</span> <span style=color:#f92672>{}</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testLocalClasses2</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;local classes test2: &#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalClass</span> <span style=color:#f92672>{}</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>());</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>LocalClass<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>上面这段代码的运行结果为：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>local classes test2: 
ml.zhannicholas.reflection.ReflectionTest$2LocalClass
ml.zhannicholas.reflection.ReflectionTest$2LocalClass
null
LocalClass
local classes test1: 
ml.zhannicholas.reflection.ReflectionTest$1LocalClass
ml.zhannicholas.reflection.ReflectionTest$1LocalClass
null
LocalClass
</code></pre></div><h4 id=数组>数组</h4>
<p>对于数组，<code>getSimpleName()</code>返回数组元素类型对应的<code>simple name</code>加上数组维度数量的<code>[]</code>,<code>getTypeName()</code>返回的是数组元素类型对应的<code>type name</code>加上数组维度数量的<code>[]</code>，
<code>getCanonicalName()</code>返回的是数组元素类型对应的<code>canonical name</code>加上数组维度数量的<code>[]</code>，<code>getName()</code>返回的是数组维度数量的<code>[</code>加上数组元素类型对应的编码:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>User<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// User[]
</span><span style=color:#75715e></span>User<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span> <span style=color:#75715e>// [Lml.zhannicholas.reflection.User
</span><span style=color:#75715e></span>User<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeName</span><span style=color:#f92672>();</span>   <span style=color:#75715e>// ml.zhannicholas.reflection.User[]
</span><span style=color:#75715e></span>User<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getCanonicalName</span><span style=color:#f92672>();</span>    <span style=color:#75715e>// ml.zhannicholas.reflection.User[]
</span></code></pre></div><h4 id=全限定名与规范名>全限定名与规范名</h4>
<p>全限定名(fully qualified name)与规范名(canonical name)的定义和区别见<a href=https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.7>JLS11</a>。</p>
<h3 id=获取修饰符>获取修饰符</h3>
<p>通过<code>getModifiers()</code>方法可以获取一个类或接口的修饰符，返回的结果会被编码成一个<code>int</code>类型的整数，整数的每一位都代表不同的访问修饰符。我们可以 **<code>Modifier</code>**类的静态方法<code>toString()</code>获得解码后的访问修饰符。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>int</span> modifier <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getModifiers</span><span style=color:#f92672>();</span>
Modifier<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>modifier<span style=color:#f92672>);</span>    <span style=color:#75715e>// public
</span><span style=color:#75715e></span>Modifier<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>Serializable<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getModifiers</span><span style=color:#f92672>());</span>   <span style=color:#75715e>// public abstract interface
</span></code></pre></div><p>通过这里我们可以明确的知道接口类型是<code>abstract</code>的。</p>
<p>值得注意的是，这里的访问修饰符指的是JVM中的访问修饰符，即<a href=https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-4.html#jvms-4.1>JVMS11</a>中定义的<code>access_flags</code>，共9种，而<a href=https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.1.1>JLS11</a>定义的类修饰符只有7种。</p>
<h3 id=获取父类>获取父类</h3>
<p>通过<code>getSuperClass()</code>方法可以获得一个类的父类对应的 **<code>Class</code><strong>实例。对于基本类型、<code>void</code>、接口、</strong><code>Object</code>**类本身，调用这个方法会返回<code>null</code>。对于数组，方法会返回 **<code>Object</code>**类对应的 **<code>Class</code>**实例：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span> <span style=color:#75715e>// class java.lang.Object
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span> <span style=color:#75715e>// class java.lang.Object
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span>   <span style=color:#75715e>// null
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span>  <span style=color:#75715e>// null
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#66d9ef>void</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span> <span style=color:#75715e>// null
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Serializable<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getSuperclass</span><span style=color:#f92672>());</span> <span style=color:#75715e>// null
</span></code></pre></div><h3 id=获取类直接实现的接口>获取类直接实现的接口</h3>
<p>通过调用<code>getInterfaces()</code>方法，我们可以得到类直接实现的接口，或接口直接继承的接口。对于基本类型，方法返回一个长度为0的数组。对于数组类型，方法会返回一个长度为2的数组，对应的元素分别为 **<code>java.lang.Cloneable</code>**和 <strong><code>java.io.Serializable</code></strong>：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>()));</span>    <span style=color:#75715e>// [interface java.lang.Cloneable, interface java.io.Serializable]
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>()));</span>  <span style=color:#75715e>// []
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>()));</span> <span style=color:#75715e>// []
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>List<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>()));</span>    <span style=color:#75715e>// [interface java.util.Collection]
</span><span style=color:#75715e></span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>User<span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInterfaces</span><span style=color:#f92672>()));</span>  <span style=color:#75715e>// [interface java.lang.Cloneable, interface java.io.Serializable]
</span></code></pre></div><h3 id=获取注解>获取注解</h3>
<p>可以通过以下方式获取一个类或接口上的注解：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>Annotation<span style=color:#f92672>[]</span> annotations <span style=color:#f92672>=</span> Deprecated<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getAnnotations</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=获取泛型参数>获取泛型参数</h3>
<p>可以通过<code>getTypeParameters()</code>方法获取泛型参数，例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>TypeVariable<span style=color:#f92672>[]</span> typeVariables <span style=color:#f92672>=</span> Map<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getTypeParameters</span><span style=color:#f92672>();</span>
<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>TypeVariable typeVariable<span style=color:#f92672>:</span> typeVariables<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>typeVariable<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>以上代码获取了 **<code>java.util.Map</code>**接口内的泛型参数名字，输出结果为：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>K V 
</code></pre></div><h3 id=获取构造函数信息>获取构造函数信息</h3>
<p>**<code>Class</code>**类提供了4种可以获取构造函数信息的方法：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> Constructor<span style=color:#f92672>&lt;?&gt;[]</span> getConstructors<span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Constructor<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getConstructor</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;?&gt;...</span> parameterTypes<span style=color:#f92672>);</span>
<span style=color:#66d9ef>public</span> Constructor<span style=color:#f92672>&lt;?&gt;[]</span> getDeclaredConstructors<span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Constructor<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;?&gt;...</span> parameterTypes<span style=color:#f92672>);</span>
</code></pre></div><p><code>getConstructors()</code>方法返回当前类中的所有公有构造函数(对于接口类型、基本类型、<code>void</code>类型和数组类型，返回的数组长度为0)，<code>getDeclaredConstructors()</code>方法返回当前类中所有声明的所有构造函数，如果当前类有默认构造函数，那么默认构造函数也会被添加到返回结果中。
<code>getConstructor()</code>和<code>getDeclaredConstructor()</code>可以返回具有特定参数列表的构造函数，如果找不到特定参数列表的构造函数，经抛出一个 **<code>NoSuchMethodException</code>**异常。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printConstructor</span><span style=color:#f92672>(</span>Constructor<span style=color:#f92672>&lt;?&gt;</span> constructor<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
     System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>toGenericString</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printConstructors</span><span style=color:#f92672>(</span>Constructor<span style=color:#f92672>&lt;?&gt;[]</span> constructors<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Constructor<span style=color:#f92672>&lt;?&gt;</span> constructor<span style=color:#f92672>:</span> constructors<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        printConstructor<span style=color:#f92672>(</span>constructor<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getConstructors</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> NoSuchMethodException <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Constructors of ActiveUser.class:&#34;</span><span style=color:#f92672>);</span>
    printConstructors<span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getConstructors</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Constructors of User.class:&#34;</span><span style=color:#f92672>);</span>
    printConstructors<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getConstructors</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared constructors of ActiveUser.class:&#34;</span><span style=color:#f92672>);</span>
    printConstructors<span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructors</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared constructors of User.class:&#34;</span><span style=color:#f92672>);</span>
    printConstructors<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructors</span><span style=color:#f92672>());</span>

    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared constructors of User.class with parameters list (String.class):&#34;</span><span style=color:#f92672>);</span>
    printConstructor<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>));</span>
<span style=color:#f92672>}</span>
</code></pre></div><p><code>getConstructors()</code>方法会尝试去获取 **<code>User</code>**和 **<code>ActiveUser</code>**的构造函数并输出，运行方法，将会得到以下结果：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Constructors of ActiveUser.class:
public ml.zhannicholas.reflection.ActiveUser()

Constructors of User.class:
public ml.zhannicholas.reflection.User(java.lang.String)
public ml.zhannicholas.reflection.User()

Declared constructors of ActiveUser.class:
public ml.zhannicholas.reflection.ActiveUser()

Declared constructors of User.class:
private ml.zhannicholas.reflection.User(java.lang.String,java.lang.String)
public ml.zhannicholas.reflection.User(java.lang.String)
public ml.zhannicholas.reflection.User()

Declared constructors of User.class with parameters list (String.class):
public ml.zhannicholas.reflection.User(java.lang.String)
</code></pre></div><h3 id=获取字段信息>获取字段信息</h3>
<p>**<code>Class</code>**类提供了4种可以获取字段信息的方法：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> Field<span style=color:#f92672>[]</span> <span style=color:#a6e22e>getFields</span><span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Field <span style=color:#a6e22e>getField</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>);</span>
<span style=color:#66d9ef>public</span> Field<span style=color:#f92672>[]</span> <span style=color:#a6e22e>getDeclaredFields</span><span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Field <span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>);</span>
</code></pre></div><p><code>getFields()</code>方法返回类中所有的公有字段(包括继承来的公有字段)，<code>getDeclaredFields()</code>返回类中声明的所有字段(但不包括从继承来的字段)，<code>getField()</code>和<code>getDeclaredField()</code>会返回具有指定<code>name</code>的字段，若不存在<code>name</code>对应的字段，将抛出一个 <strong><code>NoSuchFieldException</code></strong>。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printField</span><span style=color:#f92672>(</span>Field field<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>field<span style=color:#f92672>.</span><span style=color:#a6e22e>toGenericString</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printFields</span><span style=color:#f92672>(</span>Field<span style=color:#f92672>[]</span> fields<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Field field<span style=color:#f92672>:</span> fields<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        printField<span style=color:#f92672>(</span>field<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getFields</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> NoSuchFieldException <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Fields of User.class:&#34;</span><span style=color:#f92672>);</span>
    printFields<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getFields</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Fields of ActiveUser.class&#34;</span><span style=color:#f92672>);</span>
    printFields<span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getFields</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared fields of User.class:&#34;</span><span style=color:#f92672>);</span>
    printFields<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredFields</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared fields of ActiveUser.class:&#34;</span><span style=color:#f92672>);</span>
    printFields<span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredFields</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Filed [approach] of ActiveUser.class:&#34;</span><span style=color:#f92672>);</span>
    printField<span style=color:#f92672>(</span>ActiveUser<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;approach&#34;</span><span style=color:#f92672>));</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared field [uuid] of User.class:&#34;</span><span style=color:#f92672>);</span>
    printField<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;uuid&#34;</span><span style=color:#f92672>));</span>
<span style=color:#f92672>}</span>
</code></pre></div><p><code>getFields()</code>方法会尝试获取 **<code>User</code>**和 **<code>ActiveUser</code>**类中满足要求的字段并输出，输出结果如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Fields of User.class:

Fields of ActiveUser.class
public java.lang.String ml.zhannicholas.reflection.ActiveUser.approach

Declared fields of User.class:
protected java.lang.String ml.zhannicholas.reflection.User.uuid
protected java.lang.String ml.zhannicholas.reflection.User.name
protected java.lang.String ml.zhannicholas.reflection.User.email

Declared fields of ActiveUser.class:
public java.lang.String ml.zhannicholas.reflection.ActiveUser.approach

Filed [approach] of ActiveUser.class:
public java.lang.String ml.zhannicholas.reflection.ActiveUser.approach
Declared field [uuid] of User.class:
protected java.lang.String ml.zhannicholas.reflection.User.uuid
</code></pre></div><h3 id=获取方法信息>获取方法信息</h3>
<p>**<code>Class</code>**类提供了4种可以获取方法信息的方法：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> Method<span style=color:#f92672>[]</span> <span style=color:#a6e22e>getMethods</span><span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Method <span style=color:#a6e22e>getMethod</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> Class<span style=color:#f92672>&lt;?&gt;...</span> parameterTypes<span style=color:#f92672>);</span>
<span style=color:#66d9ef>public</span> Method<span style=color:#f92672>[]</span> <span style=color:#a6e22e>getDeclaredMethods</span><span style=color:#f92672>();</span>
<span style=color:#66d9ef>public</span> Method <span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> Class<span style=color:#f92672>&lt;?&gt;...</span> parameterTypes<span style=color:#f92672>);</span>
</code></pre></div><p><code>getMethods()</code>方法返回类中所有公有方法(包括继承来的)，<code>getDeclaredMethods()</code>方法返回类中所有声明的方法(不包括继承来的),<code>getMethod()</code>和<code>getDeclaredMethod()</code>返回满足指定参数列表并且方法名匹配的方法，可能抛出一个 <strong><code>NoSuchMethodException</code></strong>。这四个方法不会获取类中的构造函数。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printMethod</span><span style=color:#f92672>(</span>Method method<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>toGenericString</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>printMethods</span><span style=color:#f92672>(</span>Method<span style=color:#f92672>[]</span> methods<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Method method<span style=color:#f92672>:</span> methods<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        printMethod<span style=color:#f92672>(</span>method<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getMethods</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> NoSuchMethodException <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Methods of User.class:&#34;</span><span style=color:#f92672>);</span>
    printMethods<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getMethods</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared method of User.class:&#34;</span><span style=color:#f92672>);</span>
    printMethods<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethods</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Method [equals] without parameter list in User.class:&#34;</span><span style=color:#f92672>);</span>
    printMethod<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;equals&#34;</span><span style=color:#f92672>,</span> Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>));</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Declared method [getEmail] without parameter list in User.class:&#34;</span><span style=color:#f92672>);</span>
    printMethod<span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getEmail&#34;</span><span style=color:#f92672>));</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>这段代码会尝试获取 **<code>User</code>**类中满足要求的方法并输出，运行结果为：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Methods of User.class:
public java.lang.String ml.zhannicholas.reflection.User.getName()
public void ml.zhannicholas.reflection.User.setName(java.lang.String)
public java.lang.String ml.zhannicholas.reflection.User.getEmail()
public void ml.zhannicholas.reflection.User.setEmail(java.lang.String)
public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException
public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException
public final void java.lang.Object.wait() throws java.lang.InterruptedException
public boolean java.lang.Object.equals(java.lang.Object)
public java.lang.String java.lang.Object.toString()
public native int java.lang.Object.hashCode()
public final native java.lang.Class&lt;?&gt; java.lang.Object.getClass()
public final native void java.lang.Object.notify()
public final native void java.lang.Object.notifyAll()

Declared method of User.class:
protected java.lang.Object ml.zhannicholas.reflection.User.clone() throws java.lang.CloneNotSupportedException
public java.lang.String ml.zhannicholas.reflection.User.getName()
public void ml.zhannicholas.reflection.User.setName(java.lang.String)
public java.lang.String ml.zhannicholas.reflection.User.getEmail()
public void ml.zhannicholas.reflection.User.setEmail(java.lang.String)

Method [equals] without parameter list in User.class:
public boolean java.lang.Object.equals(java.lang.Object)
Declared method [getEmail] without parameter list in User.class:
public java.lang.String ml.zhannicholas.reflection.User.getEmail()
</code></pre></div><h2 id=创建新实例>创建新实例</h2>
<p>通过反射，有两种方式可以创建新的实例：</p>
<ol>
<li>使用<code>Class.newInstance()</code>。</li>
<li>使用<code>Constructor.newInstance()</code>。</li>
</ol>
<p>前者在JDK9中已被弃用，因为它会抛出构造函数中的任何异常(不管是受检异常还是非受检异常)，而后者会使用 **<code>InvocationTargetException</code>**来包裹构造函数抛出的任何异常。此外，和后者相比，前者只支持无参构造函数并要求这个构造函数是可见的，而后者能够调用所有的构造函数(包括被<code>private</code>修饰的构造函数)。前者可以使用<code>clazz.getDeclaredConstructor().newInstance()</code>代替。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Invoke default constructor:&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>().</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>());</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Invoke public constructor:&#34;</span><span style=color:#f92672>);</span>
User user1 <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Nicholas&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name=&#34;</span> <span style=color:#f92672>+</span> user1<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, email=&#34;</span> <span style=color:#f92672>+</span> user1<span style=color:#f92672>.</span><span style=color:#a6e22e>getEmail</span><span style=color:#f92672>());</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Invoke private constructor:&#34;</span><span style=color:#f92672>);</span>
Constructor<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> userConstructor <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
userConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
User user2 <span style=color:#f92672>=</span> userConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Nicholas&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;nicholas@zhannicholas.ml&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name=&#34;</span> <span style=color:#f92672>+</span> user2<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, email=&#34;</span> <span style=color:#f92672>+</span> user2<span style=color:#f92672>.</span><span style=color:#a6e22e>getEmail</span><span style=color:#f92672>());</span>
</code></pre></div><p>上面的代码演示了如何使用反射来调用默认构造函数，公有构造函数以及私有构造函数。在调用私有构造函数时，需要先是该构造函数<strong>可见</strong>，否则会遭遇一个 <strong><code>IllegalAccessException</code></strong>。运行结果如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>nvoke default constructor:
ml.zhannicholas.reflection.User@5594a1b5
Invoke public constructor:
name=Nicholas, email=null
Invoke private constructor:
name=Nicholas, email=nicholas@zhannicholas.ml
</code></pre></div><h2 id=操作数组>操作数组</h2>
<p>**<code>Class</code>**类并没有直接提供操作数组的方法，但我们可以通过它提供的<code>isArray()</code>方法来判断某个 **<code>Class</code>**实例是否代表一个数组。要操作数组，我们可以使用 **<code>java.lang.reflect.Array</code>**类，它提供了动态创建和访问数组的静态方法。</p>
<p>**<code>Array</code>**类提供了两个创建数组的方法：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Object <span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;?&gt;</span> componentType<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> length<span style=color:#f92672>);</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Object <span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;?&gt;</span> componentType<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>...</span> dimensions<span style=color:#f92672>);</span>
</code></pre></div><p>第一个方法用来创建一维数组，第二个方法用来创建多维数组。</p>
<p>此外，**<code>Array</code>**还提供了获取数组维度(<code>getLength()</code>)，设置(<code>setXXX()</code>)和读取(<code>getXXX()</code>)指定下标值的方法：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> nums <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[])</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> 2<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>nums<span style=color:#f92672>));</span>
Array<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>nums<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span>
Array<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>nums<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>+</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>nums<span style=color:#f92672>,</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, &#34;</span> <span style=color:#f92672>+</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>nums<span style=color:#f92672>,</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;]&#34;</span><span style=color:#f92672>);</span>
<span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> matrix <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][])</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Dimension of matrix: &#34;</span> <span style=color:#f92672>+</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>));</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>+</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>[</span>0<span style=color:#f92672>])</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, &#34;</span> <span style=color:#f92672>+</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>[</span>1<span style=color:#f92672>])</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;]&#34;</span><span style=color:#f92672>);</span>
Array<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{</span>1<span style=color:#f92672>,</span>2<span style=color:#f92672>});</span>
Array<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{</span>3<span style=color:#f92672>,</span>4<span style=color:#f92672>});</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>((</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[])</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>,</span> 0<span style=color:#f92672>)));</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>((</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[])</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>matrix<span style=color:#f92672>,</span> 1<span style=color:#f92672>)));</span>
</code></pre></div><p>上面这段代码演示了使用 **<code>Array</code>**类进行数组的创建、维度及内容读取，运行结果如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>[0, 0]
[1, 2]
Dimension of matrix: 2
[[0, 0], [0, 0]]
[1, 2]
[3, 4]
</code></pre></div><h2 id=调用对象方法>调用对象方法</h2>
<p>在获取到类的方法信息之后，我们可以通过 **<code>java.lang.reflect.Method</code>**的<code>public Object invoke(Object obj, Object... args);</code>方法来调用<code>obj</code>的中参数列表为<code>Object... args</code>的方法并得到方法调用结果。对于静态方法，给第一个参数传递<code>null</code>即可。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Calculator</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> a<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#66d9ef>return</span> a <span style=color:#f92672>+</span> b<span style=color:#f92672>;}</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>minus</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> a<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>{</span><span style=color:#66d9ef>return</span> a <span style=color:#f92672>-</span> b<span style=color:#f92672>;}</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>InvokeCalculator</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Method add <span style=color:#f92672>=</span> Calculator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;add&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>add<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>));</span>
        Method minus <span style=color:#f92672>=</span> Calculator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;minus&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>minus<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Calculator<span style=color:#f92672>(),</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>上面的代码通过反射获取到了 **<code>Calculator</code>**的静态方法<code>add()</code>和实例方法<code>minus</code>，然后通过 **<code>Method</code>**类的的<code>invoke()</code>方法进行调用，输出结果如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>3
-1
</code></pre></div><h2 id=修改字段值>修改字段值</h2>
<p>在获取到类的字段信息后，我们可以通过 **<code>java.lang.reflect.Field</code>**类提供的<code>getXXX()</code>方法来获取实例字段的值，也可以使用<code>setXXX()</code>方法来改变实例字段的值：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Nicholas&#34;</span><span style=color:#f92672>);</span>
Field name <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>name<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>user<span style=color:#f92672>));</span>
name<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>user<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Sarkar&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>name<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>user<span style=color:#f92672>));</span>
</code></pre></div><p>这段代码先实例化了一个 **<code>User</code>**类，然后通过反射读取<code>name</code>字段的值，之后又修改了<code>name</code>的值，运行结果如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Nicholas
Sarkar
</code></pre></div><h2 id=参考资料>参考资料</h2>
<ol>
<li>James Gosling, Bill Joy, Guy Steele, Gilad Bracha, Alex Buckley, Daniel Smith. <em>The Java Language Specification: Java SE 11 Edition</em>. 2018.</li>
<li>Tim Lindholm, Frank Yellin, Gilad Bracha, Alex Buckley, Daniel Smith. <em>The Java Virtual Machine Specification: Java SE 11 Edition</em>. 2018.</li>
<li><a href=https://docs.oracle.com/javase/tutorial/reflect/>Trail: The Reflection API</a>.</li>
</ol>
</div>
<footer class=entry-footer>
<div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg>
<span class=screen-reader-text>分类: </span><a class=category href=/categories/java/>Java</a></div>
<div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=screen-reader-text>标签: </span><a class=tag href=/tags/java/>Java</a></div>
</div>
</footer>
</article>
<nav class=entry-nav>
<div class=container><div class="prev-entry sep-before">
<a href=/posts/java/java_lang/cloning_objects/>
<span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>
Previous</span>
<span class=screen-reader-text>上一篇: </span>Cloning Objects</a>
</div><div class="next-entry sep-before">
<a href=/posts/java/java_lang/proxy/>
<span class=screen-reader-text>下一篇: </span>Java 代理<span aria-hidden=true>下一个<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg>
</span>
</a>
</div></div>
</nav>
</main>
<footer id=footer class=footer>
<div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label=社交菜单>
<ul><li>
<a href=https://github.com/zhannicholas target=_blank rel="noopener me">
<span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</li><li>
<a href=https://t.me/zhannicholas target=_blank rel="noopener me">
<span class=screen-reader-text>Open Telegram account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23.91 3.79 20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72.0-.6-.27-.84-.95L6.3 13.7.85 12c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"/></svg>
</a>
</li><li>
<a href=mailto:zhan_nicholas@outlook.com target=_blank rel="noopener me">
<span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</a>
</li><li>
<a href=https://linkedin.com/in/%e4%bc%9f%e4%bc%9f-%e8%a9%b9-27871a104 target=_blank rel="noopener me">
<span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
</li></ul>
</nav>
</section><div class=copyright>
<p> &copy; 2018-2021 Nicholas Zhan </p>
</div>
</div>
</footer>
</div>
</div><script>window.__assets_js_src="/assets/js/"</script>
<script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script>
</body>
</html>