<!doctype html><html lang=zh-cn><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/png sizes=96x96 href=https://zhannicholas.github.io/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=32x32 href=https://zhannicholas.github.io/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://zhannicholas.github.io/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title itemprop=name>Redis数据结构 | 's Digital Garden</title><meta name=description content><meta property="og:title" content="Redis数据结构 | 's Digital Garden"><meta name=twitter:title content="Redis数据结构 | 's Digital Garden"><meta itemprop=name content="Redis数据结构 | 's Digital Garden"><meta name=application-name content="Redis数据结构 | 's Digital Garden"><meta property="og:site_name" content><meta property="og:type" content="website"><meta property="og:title" content="'s Digital Garden"><meta property="og:description" content><meta property="og:site_name" content="'s Digital Garden"><meta property="og:url" content="https://zhannicholas.github.io/posts/redis/redis_datastructures/"><meta property="og:locale" content="en"><meta property="og:image" content="/"><meta property="og:image:secure_url" content="https://zhannicholas.github.io"><meta property="og:type" content="website"><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=stylesheet href="/css/style.min.6d19c7a55625bfb89667eed6b704f09b987fe7293a8361a419f808d5df426061.css" integrity="sha256-bRnHpVYlv7iWZ+7WtwTwm5h/5yk6g2GkGfgI1d9CYGE="></head><body class="bg-zinc-100 dark:bg-gray-800"><div class="top-0 z-50 w-full text-gray-200 bg-gray-900 border-2 border-gray-900 md:sticky border-b-stone-200/10"><div x-data="{ open: false }" class="flex flex-col max-w-full px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8"><div class="flex flex-row items-center justify-between p-4"><a href=https://zhannicholas.github.io/ class="flex text-gray-100 transition duration-1000 ease-in-out group"><img src=https://zhannicholas.github.io/images/site-logo.svg class="transition-opacity h-9 w-9 group-hover:opacity-50 group-focus:opacity-70" alt="'s Digital Garden Logo"><div class="mt-1 text-xl font-black tracking-tight text-gray-100 uppercase transition-colors group-hover:text-gray-400/60">'s Digital Garden</div></a><button class="rounded-lg md:hidden focus:outline-none focus:shadow-outline" @click="open = !open" role=navigation aria-expanded=false aria-label=Main aria-controls=menuItems><svg fill="currentcolor" viewBox="0 0 20 20" class="w-6 h-6"><path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 5a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"/><path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414.0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div><nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow hidden pb-4 md:pb-0 md:flex md:justify-end md:flex-row"><div @click.away="open = false" class=relative x-data="{ open: false }"><button @click="open = !open" class="flex flex-row items-center w-full px-4 py-2 mt-2 text-sm font-semibold text-left bg-transparent rounded-lg md:w-auto md:inline md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-600 focus:outline-none focus:shadow-outline">
<span>The Garden</span><svg fill="currentcolor" viewBox="0 0 20 20" :class="{'rotate-180': open, 'rotate-0': !open}" class="inline w-4 h-4 mt-1 ml-1 transition-transform duration-200 transform md:-mt-1"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414.0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414.0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button><div x-show=open x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 z-30 w-full mt-2 origin-top-right rounded-md shadow-lg md:w-48"><div class="px-2 py-2 text-indigo-900 bg-white rounded-md shadow"><a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/posts>Posts</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/notes>Notes</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/library>Library</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/til/>Today I Learned</a></div></div></div><a class="px-4 py-2 mt-2 text-sm font-semibold rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/now>Now</a>
<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-indigo-600 focus:bg-indigo-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/about>About</a>
<button id=theme-toggle type=button class="p-2 text-sm text-gray-500 rounded-lg md: dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 md:ml-2 max-w-5 xs:hidden"><svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg><svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" aria-label="Dark or Light Mode" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"/></svg></button></nav></div></div><div class=content><article><header class="max-w-2xl mx-auto mb-4 bg-indigo-600"><span class=py-96><h1 class="px-6 pt-6 pb-16 mx-auto dark:prose-invert text-5xl font-black text-center text-white capitalize">Redis数据结构</h1></span></header><div class="max-w-4xl mx-auto mt-8 mb-2"><div class=px-6></div></div><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[18rem] py-10 overflow-y-auto hidden xl:block"><nav><div class="flex items-center"><h2 class="pl-2 my-0 text-xl font-medium text-zinc-800 uppercase break-words">Table of Contents</h2></div><div class="absolute top-auto bottom-auto right-auto p-0 -left-4" role=menu><div class="relative z-50 max-w-sm m-4 overflow-hidden shadow-lg"><ul class="relative p-4 overflow-x-hidden overflow-y-auto overscroll-y-auto overscroll-x-auto"><ul><li><a class="px-2 text-left text-zinc-700 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e9%80%bb%e8%be%91%e6%95%b0%e6%8d%ae%e5%ba%93>逻辑数据库</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%8e%b7%e5%8f%96%e6%89%80%e6%9c%89%e9%94%ae%e5%90%8d>获取所有键名</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%88%a0%e9%99%a4%e9%94%ae>删除键</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%a3%80%e6%9f%a5%e9%94%ae%e7%9a%84%e5%ad%98%e5%9c%a8%e6%80%a7>检查键的存在性</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e9%94%ae%e8%bf%87%e6%9c%9f>键过期</a></li></ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b>数据类型</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#strings>Strings</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#lists>Lists</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#hashes>Hashes</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#sets>Sets</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#sorted-sets>Sorted sets</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#bitmaps>Bitmaps</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#bit-fields>Bit fields</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#bit-arrays>Bit arrays</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#hyperloglogs>HyperLogLogs</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#geospatial-indexes>Geospatial indexes</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#streams>Streams</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99>参考资料</a></li></ul></div></div></nav></div><div class="max-w-2xl px-6 pt-6 pb-16 mx-auto prose dark:prose-invert dark:text-white"><p>Redis的键是一个字符串。在Redis中，字符串二进制安全的，也就是说：Redis中的字符串可以是任何二进制序列，即可以是任何类型的数据(比如：一张图片、一个序列化后的Java对象……)。像<code>2</code>、<code>2.3</code>、<code>0xff</code>、空字符串(<code>""</code>)等任何二进制序列都可以作为Redis中的键。由于键是一个二进制序列，所以键是区分大小写的(<code>a</code>和<code>A</code>是两个不同的键)。当前版本的Redis的键最大支持到<code>512MB</code>(未来这个值可能还会更大)。过大的键会消耗更多的内存，因此选择合适的键很重要。</p><p>通常情况下，我们会使用结构良好且有意义的键名，使用冒号(<code>:</code>)作为分隔符。例如：<code>users:1000:friends</code>。</p><h3 id=逻辑数据库>逻辑数据库</h3><p>Redis中也有数据库(<code>database</code>)的概念，只是是以命名空间(<code>namespacing</code>)的形式体现的。在每一个逻辑数据库(<code>logical database</code>)内，都存在一个键空间(<code>key space</code>)。逻辑数据库通过下标(从<code>0</code>开始)进行区分。一个逻辑数据库内的键名都是唯一的，但同一个键名可以出现在多个不同的逻辑数据库中，逻辑数据库的一个作用就是对键名进行隔离。</p><p>逻辑数据库的数量也是有限制的，Redis集群只支持<code>database 0</code>。</p><h3 id=获取所有键名>获取所有键名</h3><p>有两个命令可以获取Redis数据库内所有的键名，**<code>KEYS pattern</code>**和 <strong><code>SCAN cursor [MATCH pattern] [COUNT count]</code></strong>。我们可以使用这两个命令来迭代数据库内所有的键，也可以只获取满足给定模式的键。</p><p><strong><code>KEYS</code><strong>命令会一次性迭代完所有的键，在迭代完所有的键之前，会</strong>阻塞</strong>所有其它的操作。若数据库内键的数量非常大，执行这个命令则会很<strong>耗时</strong>，因此在生产环境中使用这个命令时要谨慎，由于 **<code>KYES</code>**的使用比 **<code>SCAN</code>**要简单，因此它在调试时还是很有用的。</p><p><strong><code>SCAN</code><strong>命令也会</strong>阻塞</strong>，但它采取的是<strong>增量迭代</strong>的方式，一次只迭代少量的键，阻塞时间不会过长，因此在生产环境中使用它是安全的。</p><h3 id=删除键>删除键</h3><p>有多种方式可以删除键，每种方式都能保证删除成功，但不同方式的性能不同。</p><p><strong><code>DEL key [key ...]</code><strong>命令会删除给定的键并回收与键相关联的内存，这个删除操作是以</strong>阻塞</strong>方式进行的。**<code>UNLINK key [key ...]</code>**命令和 <strong><code>DEL</code><strong>命令类似，但它会使用单独的后台线程来回收内存，因此是</strong>非阻塞</strong>的。</p><h3 id=检查键的存在性>检查键的存在性</h3><p>当我们执行 **<code>SET</code><strong>命令时，若键不存在，将会创建键并设置值。有时候，我们希望只有当某一个键存在时，才给它设置值。</strong><code>EXISTS key [key ...]</code>**命令可以检测给定的键是否存在，若键存在，则返回<code>1</code>，否则返回<code>0</code>。</p><h3 id=键过期>键过期</h3><p>我们可以为某个key设置过期时间(<code>expires</code>)。当达到设置的过期时间时，对应的key就会被自动删除，就像我们显式的执行 <strong><code>DEL</code></strong> 命令一样。过期时间的单位可以是秒，也可以是毫秒，还可以是UNIX时间戳。关于<code>expires</code>的信息都存放在磁盘上，且有备份。这意味着，即使Redis服务器停止运行，过期时间仍然会有效。实际上，Redis保存的是key过期的确切时间，而不是剩余生存时间，虽然参数可以是秒或毫秒。</p><p>有三种类型的命令可以管理键的过期时间：</p><ol><li>设置过期时间：<strong><code>EXPIRE</code></strong>(单位为秒)、<strong><code>PEXPIRE</code></strong>(单位为毫秒)、<strong><code>EXPIREAT</code></strong>(单位为秒)、<strong><code>PEXPIREAT</code></strong>(单位为毫秒)</li><li>查看剩余过期时长：<strong><code>TTL</code></strong>(单位为秒)、<strong><code>PTTL</code></strong>(单位为毫秒)</li><li>移除过期时间：<strong><code>PERSIST</code></strong></li></ol><p>下面是一些例子：</p><pre tabindex=0><code>&gt; set s1 v1
OK
&gt; expire s1 10      // 设置s1于10秒后过期
1
&gt; ttl s1           // 查看s1的剩余生存时间(单位为秒)
7
&gt; pttl s1          // 查看s1的剩余生存时间(单位为毫秒)
3042
&gt; get s1           // 查看s1的值，未经过10秒
&#34;v1&#34;
&gt; get s1           // 查看s1的值，超过10秒，s1已被删除
(nil)
&gt; set s2 v2 ex 10  // 在设置值的同时指定过期时间为10秒
OK
&gt; set s3 v3 px 10000 // 在设置值的同时指定过期时间为10000毫秒
OK
</code></pre><h2 id=数据类型>数据类型</h2><p>Redis支持多种数据结构(类型)。我们可以使用 **<code>TYPE key</code>**命令来查看<code>key</code>对应的数据类型，例如：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; set key1 1
OK
&gt; rpush key2 a
1
&gt; type key1
string
&gt; type key2
list
</code></pre><p>**<code>OBJECT subcommand [arguments [arguments ...]]</code>**允许我们查看某个键对应的Redis对象的内部信息。支持的<code>subcommand</code>有：</p><ul><li><strong><code>OBJECT REFCOUNT &lt;key></code></strong>：返回<code>key</code>对应的值的引用数</li><li><strong><code>OBJECT ENCODING &lt;key></code></strong>：返回<code>key</code>对应的值在Redis内部存储的存储形式</li><li><strong><code>OBJECT IDLETIME &lt;key></code></strong>：返回<code>key</code>对应的值有多久没有被读/写了，单位为秒</li><li><strong><code>OBJECT FREQ &lt;key></code></strong>：返回<code>key</code>对应的值被访问频率的对数值</li><li><strong><code>OBJECT HELP</code></strong>：返回简短的帮助信息</li></ul><p>Redis中的对象在Redis内部可以被存储为多种形式：</p><ul><li><code>String</code>可以被编码成<code>raw</code>(普通字符串)和<code>int</code>(64位有符号整数会被这么存储以节省空间)</li><li><code>List</code>可以被编码成<code>ziplist</code>(用于小型<code>list</code>，可以节省空间)和<code>linkedlist</code></li><li><code>Set</code>可以被编码成<code>intset</code>(用于只由整数组成的小型集合)和<code>hashtable</code></li><li><code>Hash</code>可以被编码成<code>ziplist</code>(用于小型<code>hash</code>)和<code>hashtable</code></li><li><code>Sorted Set</code>可以被编码成<code>ziplist</code>(用于小型<code>sorted set</code>)和<code>skiplist</code></li></ul><p>当Redis无法继续维持为节省空间而是用的编码格式时，都会将编码格式转为各种类型对应的通用格式。</p><p>下面的例子展示了如何查看数据的编码格式：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; set foo 1
OK
&gt; object encoding foo
&#34;int&#34;
&gt; append foo a
(integer) 2
&gt; object encoding foo
&#34;raw&#34;
</code></pre><h3 id=strings>Strings</h3><p>字符串(<code>string</code>)是Redis中最基本的数据类型，它不仅可以存储文本数据，还可以存储整数、浮点数和二进制数据。<code>string</code>是二进制安全的，最大不能超过512MB。</p><p>Redis提供了20多个操作<code>string</code>类型的命令。下面是一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; set s1 &#34;Hello, Redis&#34;    // 设置s1的值为&#34;Hello, Redis&#34;
OK                          // 成功返回OK
&gt; get s1                   // 获取值
&#34;Hello, Redis&#34;
&gt; setnx s1 &#34;Redis&#34;         // 尝试为s1设置新值
(integer) 0                 // s1已有值，不进行操作，返回0
&gt; set s1 2                 // 设置值
OK
&gt; get s1
&#34;2&#34;
&gt; incr s1                  // 加1
(integer) 3
&gt; incrby s1 10             // 加10
(integer) 13
&gt; decr s1                  // 减1
(integer) 12
&gt; decrby s1 5              // 减5
(integer) 7
&gt; incrbyfloat s1 1.1       // 加1.1
&#34;8.09999999999999964&#34;
&gt; incrbyfloat s1 -3.1      // 减3.1
&#34;5&#34;
</code></pre><p><strong><code>SET</code></strong> 和 <strong><code>GET</code></strong> 分别用来设置和检索key对应的值(这个值是一个<strong>字符串</strong>)。需要注意的是，如果某个key已经有对应的值，<strong><code>SET</code></strong> 命令会覆盖掉已有的值(不管之前的值是何种类型都会被覆盖)，和这个key关联的<code>TTL</code>也会被丢弃。如果不希望已有key的值被覆盖，可以使用 <strong><code>SETNX</code></strong> 命令，当key存在时，<strong><code>SETNX</code></strong> 不会进行任何操作。</p><p>虽然值是<code>string</code>，但如果这个值是一个数字的字符串形式的话，可以对其进行加减操作。上面的例子中，<code>s1</code>的值被重新修改为了<code>"2"</code>，随后执行了 <strong><code>INCR</code></strong> 和 <strong><code>INCRBY</code></strong> 两个加法命令，值变成了<code>13</code>，之后的减法命令 <strong><code>DECR</code></strong> 和 <strong><code>DECRBY</code></strong> 将值减到了<code>7</code>。更加有趣的是，Redis还提供了 <strong><code>INCRBYFLOAT</code></strong> 以支持浮点加减运算。</p><p>有时候，一次性设置或获取多个值是很有意义的，这可以通过 <strong><code>MSET key value [key value ...]</code></strong> 和 <strong><code>MGET key [key ...]</code></strong> 命令实现。类似的还有 <strong><code>MSETNX</code></strong> 命令。下面是一个例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; mset s1 1 s2 2 s3 a
OK
&gt; mget s1 s2 s3
1) &#34;1&#34;
2) &#34;2&#34;
3) &#34;a&#34;
</code></pre><h3 id=lists>Lists</h3><p>在Redis中，列表(<code>list</code>)表示由一系列元素组成的有序序列。通常情况下，List的实现有数组和链表两种方式，两者各有优劣。数组实现的List可以通过索引快速访问元素，但在插入或删除元素的时候较慢；链表实现的List在插入或删除元素时非常迅速，但访问元素时较慢。Redis中的<code>list</code>使用双向链表实现，支持双向操作。基于链表的实现还带来了一个重大优势，那就是可以快速的截取列表中的某一部分。</p><p>Redis提供了10多个操作<code>list</code>的命令，下面是一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; lpush list1 a 1 b    // 向列表list1的头部依次插入a、1、b这三个元素
(integer) 3             // 成功插入，当前列表list1含有3个元素
&gt; lrange list1 0 -1    // 查看list1中的所有元素
1) &#34;b&#34;
2) &#34;1&#34;
3) &#34;a&#34;
&gt; llen list1           // 获取list1的长度
(integer) 3
&gt; rpush list1 c d      // 向列表list1尾部依次插入c、d这两个元素
(integer) 5             // 插入成功，当前列表list1含有5个元素
&gt; lrange list1 0 -1
1) &#34;b&#34;
2) &#34;1&#34;
3) &#34;a&#34;
4) &#34;c&#34;
5) &#34;d&#34;
&gt; lpop list1           // 移除并返回列表list1中的第一个元素
&#34;b&#34;
&gt; rpop list1           // 移除并返回列表list2中的最后一个元素
&#34;d&#34;
&gt; lrange list2 0 -1    // 列表list2是空的
(empty list or set)
&gt; lpop list2           // 从一个空的列表里面移除元素会返回NULL
(nil)
&gt; rpop list2
(nil)
&gt; lrange list1 0 -1
1) &#34;1&#34;
2) &#34;a&#34;
3) &#34;c&#34;
&gt; lindex list1 0      // 查看列表list1中处于位置0处的元素
1
&gt; lindex list1 -1     // 查看列表list1中最后一个元素
&#34;c&#34;
&gt; ltrim list1 1 2     // 修剪列表list1，只保留位于区间[1,2]中的元素
OK
&gt; lrange list1 0 -1   // 查看list1中所有元素
1) &#34;a&#34;
2) &#34;c&#34;
</code></pre><p>命令 <strong><code>LPUSH key value [value ...]</code></strong> 和 <strong><code>RPUSH key value [value ...]</code></strong> 分别用来向列表头部(左侧)和尾部(右侧)添加元素，<strong><code>LPOP key</code></strong> 和 <strong><code>RPOP key</code></strong> 分别用来从列表头部(左侧)和尾部(右侧)移除元素。在一个空的列表上执行 <strong><code>LPOP</code></strong> 或 <strong><code>RPOP</code></strong> 将返回 <strong>NULL</strong> 。</p><p>若要查看列表中的元素，可以使用 <strong><code>LRANGE key start stop</code></strong> 命令，<strong><code>LRANGE</code></strong> 命令需要两个索引作为参数。这两个索引形成一个区间，分别指向待返回的第一个和最后一个元素在列表中的位置。索引可以是负数，<code>0</code>、<code>-1</code>、<code>-2</code>分别代表链表中的第一个、最后一个和倒数第二个元素。除了区间查看外，还可以使用 <strong><code>LINDEX key index</code></strong> 命令查看指定位置的元素。</p><p><strong><code>LLEN key</code></strong> 用于查看<code>list</code>的长度。很多时候，我们只需要保留列表中的某一部分，这个时候 <strong><code>LTRIM key start end</code></strong> 就可以排上用场了，它和 <strong><code>LRANGE</code></strong> 类似，也接收两个索引作为参数，但它将列表的内容设置为区间内的元素并去除区间外的所有元素。上面的例子中，<strong><code>LTRIM</code></strong> 告诉Redis只保留列表list1处于区间[1,2]中的元素，然后丢弃其它的元素。</p><p>有时候，我们希望只有当列表中有元素时，才执行POP操作，这时候可以使用 <strong><code>BLPOP key [key ...] timeout</code></strong> 和 <strong><code>BRPOP key [key ...] timeout</code></strong> 。两个命令的都是从列表中移除元素，只是方向不一样。以 <strong><code>BLPOP</code></strong> 为例，它接收一个或多个<code>key</code>以及一个超时时间<code>timeout</code>(可阻塞时间，单位为秒，0代表一直阻塞)。在这些<code>key</code>中，如果有key对应的列表不为空，将会返回第一个非空列表的key及POP出的值。举个例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; lrange list1 0 -1  // 列表list1包含两个元素
1) &#34;a&#34;
2) &#34;c&#34;
&gt; lrange list2 0 -1  // 列表list2为空
(empty list or set)
&gt; blpop list2 list1 0  // list1中的第一个元素被移除
1) &#34;list1&#34;
2) &#34;a&#34;
</code></pre><p><strong><code>BLPOP</code></strong> 依次检查list2和list1，然后移除并返回list1的头部元素(list2是一个空列表)。</p><p>如果 <strong><code>BLPOP</code></strong> 命令后面给出的的key对应的都是空列表，<strong><code>BLPOP</code></strong> 就会阻塞当前连接。一旦另外一个客户端向某一个key对应的列表插入元素，<strong><code>BLPOP</code></strong> 就会解除阻塞并返回。若阻塞的时间超过了<code>timeout</code>，将返回<code>NULL</code>。</p><h3 id=hashes>Hashes</h3><p>Redis中的哈希表(<code>hash</code>)是一个字符串类型的field-value映射表(field和value的类型均是<code>string</code>)，不支持多级嵌套，非常适合表示对象。</p><p>下面是一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; hset user:1 name Tome  // 将哈希表user:1的name字段的值设置为Tome
(integer) 1
&gt; hget user:1 name       // 获取哈希表user:1中name字段对应的值
&#34;Tome&#34;
&gt; hmset user:2 name Bob age 20 education barchelor // 一次向哈希表user:2中插入多个filed-value
OK
&gt; hmget user:2 name age  // 获取哈希表user:2中name和age字段对应的值
1) &#34;Bob&#34;
2) &#34;20&#34;
&gt; hgetall user:2         // 获取哈希表user:2中所有字段和值
1) &#34;name&#34;
2) &#34;Bob&#34;
3) &#34;age&#34;
4) &#34;20&#34;
5) &#34;education&#34;
6) &#34;barchelor&#34;
&gt; hget user:1 age        // 企图获取一个不存在的字段对应的值，会返回NULL
(nil)
&gt; hexists user:1 age     // 检查哈希表user:1中是否存在字段age
(integer) 0
&gt; hvals user:2           // 返回哈希表user:2中所有的值
1) &#34;Bob&#34;
2) &#34;20&#34;
3) &#34;barchelor&#34;
&gt; hincrby user:2 age 2  // 将哈希表user:2的age字段对应的值加2
(integer) 22
&gt; hget user:2 age
&#34;22&#34;
</code></pre><h3 id=sets>Sets</h3><p>Redis中的集合(<code>set</code>)是一个由<u>字符串</u>构成的无序集合，集合中不存在重复元素。除了基本的插入、删除、存在性检测等操作，Redis还支持集合的交、并、差计算。</p><p>下面是基本操作的一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; sadd colors red blue white black // 向集合colors中插入4个元素
(integer) 4
&gt; smembers colors                  // 查看集合colors内容
1) &#34;blue&#34;
2) &#34;white&#34;
3) &#34;red&#34;
4) &#34;black&#34;
&gt; sismember colors yellow        // 检查yellow是否在colors中
(integer) 0                       // 集合colors不包含yellow
&gt; scard colors                   // 查看集合colors的基数(元素个数)
(integer) 4
&gt; spop colors                    // 随机从集合colors中移除一个元素
&#34;black&#34;
&gt; srem set1 black                // 从集合colors中删除一个不存在的元素
(integer) 0
&gt; srem colors white              // 从集合colors中删除一个存在的元素
(integer) 1
&gt; smembers colors
1) &#34;blue&#34;
2) &#34;red&#34;
</code></pre><p>下面是集合运算：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; sadd set2 a b c red blue gold
(integer) 6
&gt; smembers set2
1) &#34;c&#34;
2) &#34;a&#34;
3) &#34;gold&#34;
4) &#34;b&#34;
5) &#34;red&#34;
6) &#34;blue&#34;
&gt; sunion colors set2   // colors ∩ set2
1) &#34;gold&#34;
2) &#34;red&#34;
3) &#34;b&#34;
4) &#34;a&#34;
5) &#34;blue&#34;
6) &#34;c&#34;
&gt; sinter colors set2   // colors ∪ set2
1) &#34;blue&#34;
2) &#34;red&#34;
&gt; sdiff set2 colors   // set - colors
1) &#34;gold&#34;
2) &#34;b&#34;
3) &#34;c&#34;
4) &#34;a&#34;
&gt; sadd set3 f
(integer) 1
&gt; sdiff set2 colors set3   // set2 - colors - set3
1) &#34;gold&#34;
2) &#34;b&#34;
3) &#34;c&#34;
4) &#34;a&#34;
</code></pre><h3 id=sorted-sets>Sorted sets</h3><p>Redis中的有序集合(<code>sorted set</code>)和集合(<code>set</code>)类似，存放不重复的字符串。不过，有序集合中的每个元素都有一个对应的浮点类型的分数(<code>score</code>)，这个分数用来维持集合的有序性。由于是有序的，有序集合又具有哈希表的快速访问的优势。</p><p>考虑有序集合中的两个元素<code>A</code>和<code>B</code>，有序集合的有序性基于以下两点：</p><ul><li>如果<code>A.score > B.score</code>，那么：<code>A > B</code></li><li>如果<code>A.socre = B.score</code>，<code>A > B</code>的前提是<code>A</code>的字典序大于<code>B</code>。因为集合的元素都是唯一的，所以<code>A</code>和<code>B</code>的内容不可能相同</li></ul><p>下面是一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; zadd z1 2 a -1 b               // 向有序集合z1中添加a(score=2)和b(score=-1)， ZADD还可以用来更新元素对应的分数
(integer) 2
&gt; zrange z1 0 -1                 // 查看z1内容(正序)，因为b.score &lt; a.score，所以b在前面
1) &#34;b&#34;
2) &#34;a&#34;
&gt; zrange z1 0 -1 withscores      // 查看z1内容及对应分数
1) &#34;b&#34;
2) &#34;-1&#34;
3) &#34;a&#34;
4) &#34;2&#34;
&gt; zrevrange z1 0 -1              // 查看z1内容(逆序)
1) &#34;a&#34;
2) &#34;b&#34;
&gt; zrangebyscore z1 0 inf         // 查看z1中分数在[0, inf)内的内容
1) &#34;a&#34;
&gt; zrank z1 b                     // 查看z1中内容b的排名
(integer) 0
&gt; zremrangebyscore z1 -inf -1    // 移除z1中分数位于(-inf,1]的所有元素
(integer) 1
&gt; zrange z1 0 -1
1) &#34;a&#34;
</code></pre><p>有序集合还支持很多的命令，比如：<strong><code>ZPOPMAX</code></strong>、<strong><code>ZRANGEBYLEX</code></strong>、**<code>ZUNIONSTORE</code>**等等。</p><h3 id=bitmaps>Bitmaps</h3><p>严格地说，<code>Bitmap</code>并不是一种新的数据类型，而是基于<code>string</code>的一种数据类型，它提供了一些基于比特位的操作。由于当前Redis中的<code>string</code>最大支持到<code>512MB</code>，因此位操作能够使用的比特位数最大为$$2^{32}$$，约为<code>4.295</code>亿。</p><h4 id=bit-fields>Bit fields</h4><p><code>Bit field</code>是一种数据结构，它把数据以比特位为单元进行存储，并允许对单个比特位或一组比特位进行操作。</p><p>**<code>BITFIELD</code>**会将<code>string</code>作为位数组对待，支持一次操作一个或多个位。可以理解为：我们可以在<code>string</code>上操作一个或多个可变长度的整数。其完整语法如下，包括三个子命令和三种溢出策略：
<strong><code>BITFIELD key [GET type offset] [SET type offset value] [INCRBY type offset increment] [OVERFLOW WRAP|SAT|FAIL]</code></strong></p><p>这里的<code>type</code>必须是整数类型，它由两部分组成：<code>符号前缀</code>+<code>整数的宽度</code>。<code>前缀</code>由分为两种：<code>i</code>表示有符号(<code>signed</code>)整数，而<code>u</code>表示无符号(<code>unsigned</code>)整数。例如：<code>u8</code>表示宽度为8位的无符号整数，而<code>i5</code>表示宽度为5位的有符号整数。<u>对于无符号整数，最大支持到64位，而对于有符号整数，最大支持到63位</u>。</p><p><code>offset</code>有两种形式：</p><ul><li>不带前缀<code>#</code>，采用从<code>0</code>开始的<code>offset</code>去确定<code>bit field</code>的位置</li><li>带前缀<code>#</code>，采用<code>整数的宽度</code>乘以<code>offset</code>去确定<code>bit field</code>的位置</li></ul><p><img src=https://zhannicholas.github.io/images/databases/redis/bitfield-offset.png alt=offset></p><p>例如：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; bitfield myfield set u8 0 42
1) (integer) 0
&gt; bitfield myfield get u8 0
1) (integer) 42
&gt; type myfield
string
&gt; object encoding myfield
&#34;raw&#34;
&gt; bitfield myfield set u8 #1 10
1) (integer) 0
&gt; bitfield myfield get u8 #1 get u8 8
1) (integer) 10
2) (integer) 10
&gt; get myfield
&#34;*\n&#34;           // 在ASCII表中，42表示&#39;*&#39;，而10表示&#39;\n&#39;。
</code></pre><p>**<code>BITFIELD</code>**支持的三个子命令分别为：</p><ul><li><strong><code>GET &lt;type> &lt;offset></code></strong>：返回给定的<code>bit field</code></li><li><strong><code>SET &lt;type> &lt;offset> &lt;value></code></strong>：设置<code>bit field</code>的值并返回其上的旧值</li><li><strong><code>INCRBY &lt;type> &lt;offset> &lt;increment></code></strong>：在给定的<code>bit field</code>上执行增减操作，并返回新值</li></ul><p>对于 **<code>INCRBY</code>**子命令，还可以指定溢出策略，有三种可选的溢出策略：</p><ul><li><strong>WRAP</strong>：<code>wrap around</code>，回绕。例如，对于<code>i8</code>类型的<code>127</code>，加一会得到<code>-128</code>，而对于<code>u7</code>类型的<code>128</code>，加一会得到<code>0</code></li><li><strong>SAT</strong>：<code>saturation arithmetic</code>，饱和计算。例如，例如，对于<code>i8</code>类型的<code>127</code>，加一依然是<code>128</code></li><li><strong>FAIL</strong>：当发生溢出时，不采取任何运算，而是返回<code>NULL</code>
<strong>WRAP</strong>是默认的溢出策略。</li></ul><h4 id=bit-arrays>Bit arrays</h4><p><strong><code>SETBIT key offset value</code><strong>给指定比特位设置值，然后返回该位置上</strong>原来的值</strong>，如果<code>key</code>不存在，则会先创建一个新的<code>string</code>，这个<code>string</code>会自动扩容以保证<code>offset</code>的有效性。企图使用 **<code>SETBIT</code>**设置<code>0</code>和<code>1</code>以外的值会导致错误。 **<code>GETBIT key offset</code>**获取<code>offset</code>位置的值，若给定<code>offset</code>超出了当前<code>string</code>的长度或<code>key</code>不存在，Redis都会返回<code>0</code>。例如：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; setbit bits 2 1
(integer) 0
&gt; getbit bits 2
(integer) 1
&gt; getbit bits 1
(integer) 0
</code></pre><p>有三种命令可以操作一组比特位：</p><ul><li><strong><code>BITOP operation destkey key [key ...]</code></strong>：进行字符串之间的按位与(<code>AND</code>)、按位或(<code>OR</code>)、按位异或(<code>XOR</code>)以及按位取反(<code>NOT</code>)操作</li><li><strong><code>BITCOUNT key [start end]</code></strong>：进行计数操作，返回设置为<code>1</code>的比特位的个数</li><li><strong><code>BITPOS key bit [start end]</code></strong>：寻找给定<code>bit</code>(<code>0</code>或<code>1</code>)出现的第一个位置</li></ul><h3 id=hyperloglogs>HyperLogLogs</h3><p>Redis使用<code>HyperLogLog</code>进行计数，这个算法是基于统计的。Redis的实现中，标准误差只有1%，并且在最坏的情况下只需要消耗 <strong>12KB</strong> 的内存。<code>HyperLogLog</code>在技术上是一种不同的数据结构，但也是基于<code>string</code>实现的。</p><p>我们使用 <strong><code>SADD</code></strong> 向集合中添加元素，类似的，我们也可以使用 <strong><code>PFADD</code></strong> 向<code>HyperLogLog</code>中添加元素。实际上，<code>HyperLogLog</code>并不存储我们添加的元素，只是更新内部状态。</p><pre tabindex=0><code>&gt; pfadd hll a b c d    // 向hll中加入四个元素
(integer) 1
&gt; type hll             // 查看hll类型
string                  // HyperLogLog实际为string
&gt; pfcount hll          // 对hll进行计数
(integer) 4
&gt; pfadd hll1 a b c d
(integer) 1
&gt; pfadd hll2 c d e f
(integer) 1
&gt; pfmerge hll3 hll1 hll2 // 合并hll1和hll2到hll3
OK
&gt; pfcount hll3
(integer) 6
</code></pre><h3 id=geospatial-indexes>Geospatial indexes</h3><p>Redis在3.2.0版本中加入了地理空间(<code>geospatial</code>)这一数据类型，并支持半径查询功能。一个具体的位置信息由三元组(longtitude, latitude, member)确定。对于每一个<code>&lt;latitude, longitude></code>对，Redis都会计算出一个<code>GeoHash</code>(Redis中的<code>GeoHash</code>是一个<code>52</code>位的整数)。当我们使用 **<code>GEOADD key longitude latitude member [longitude latitude member ...]</code>**向一个key添加地理数据时，数据会被存储为<u>有序集合(<code>member</code>作为有序集合中的<code>member</code>，<code>GeoHash</code>作为有序集合中的<code>score</code>)</u>，这么做为半径查询 **<code>GEORADIUS key longitude latitude radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC] [STORE key] [STOREDIST key]</code>**和 **<code>GEORADIUSBYMEMBER key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count] [ASC|DESC] [STORE key] [STOREDIST key]</code>**提供了支持。有序集合上的所有命令也能用于<code>geospatial</code>类型。</p><p>下面是一些例子：</p><pre tabindex=0><code class=language-Redis data-lang=Redis>&gt; geoadd municipalities 116.4551113869 39.6733986505 beijing 121.6406041505 30.8267595167 shanghai 106.6992091675 29.3055601981 chongqing  // 添加3个地理空间数据
(integer) 3
&gt; zrange municipalities 0 -1 withscores   // 因为GeoHash使用有序集合存储，所以可以使用zrange命令
1) &#34;chongqing&#34;
2) &#34;4026043269574572&#34;
3) &#34;shanghai&#34;
4) &#34;4054740844391077&#34;
5) &#34;beijing&#34;
6) &#34;4069148402401385&#34;
&gt; type municipalities
zset
&gt; geohash municipalities beijing shanghai              // 查看beijing和chongqing的GeoHash
1) &#34;wx4cdn242c0&#34;
2) &#34;wtqrrgzfzs0&#34;
&gt; geopos municipalities chongqing                      // 查看chongqing的地理空间数据
1) 1) &#34;106.69921070337295532&#34;
   2) &#34;29.30556015923176716&#34;
&gt; geodist municipalities beijing chongqing             // 查看beijing和chongqing直接的距离(单位为米)
&#34;1457336.8906&#34;
&gt; georadius municipalities 116 40 1000 km              // 查看以经度116、纬度40为中心，1000km为半径内的所有位置
1) &#34;beijing&#34;
&gt; georadiusbymember municipalities chongqing 1500 km   // 查看以chongqing为中心、1500km为半径内的所有位置
1) &#34;chongqing&#34;
2) &#34;shanghai&#34;
3) &#34;beijing&#34;
</code></pre><h3 id=streams>Streams</h3><p>见<a href=../redis_streams>Redis Streams</a>
。</p><h2 id=参考资料>参考资料</h2><ol><li><a href=https://redis.io/topics/data-types-intro target=_blank>An introduction to Redis data types and abstractions</a>
.</li><li><a href=https://en.wikipedia.org/wiki/Bit_field target=_blank>Bit field</a>
.</li></ol></div></article></div><div x-cloak x-data="{ atTop: false }"><button id=scrollToTop name="scroll to top button" aria-label="scroll to top button" class="fixed z-50 w-10 h-10 font-bold text-center text-white transition-all duration-1000 ease-in-out transform bg-violet-600 rounded-full cursor-pointer animate-bounce bottom-24 right-8 focus:outline-none" :class="{ 'opacity-0 translate-y-24': !atTop, 'opacity-1 translate-y-2' :  atTop}" @click="window.scrollTo({ top: 0, behavior: 'smooth'})" @scroll.window="atTop = (window.pageYOffset > 200)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0 3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"/></svg></button></div><script src=https://zhannicholas.github.io/js/alpine.js defer></script>
<script src=https://zhannicholas.github.io/js/darkmode.js defer></script><footer class=bg-gray-900><div class="max-w-md px-4 py-12 mx-auto overflow-hidden sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8"><nav class="flex flex-wrap justify-center -mx-5 -my-2" aria-label=Footer><div class="px-5 py-2"><a href=https://zhannicholas.github.io/about class="text-base text-gray-400 hover:text-gray-300">About</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/posts class="text-base text-gray-400 hover:text-gray-300">Posts</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/notes class="text-base text-gray-400 hover:text-gray-300">Notes</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/library class="text-base text-gray-400 hover:text-gray-300">Library</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/contact/ class="text-base text-gray-400 hover:text-gray-300">Contact</a></div></nav><div class="flex justify-center mt-2 space-x-6"><a href=https://github.com/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>GitHub</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483.0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951.0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65.0.0.84-.27 2.75 1.026A9.564 9.564.0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688.0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855.0 1.338-.012 2.419-.012 2.747.0.268.18.58.688.482A10.019 10.019.0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg></a>
<a href=mailto:zhan_nicholas@outlook.com class="text-gray-400 hover:text-gray-300"><span class=sr-only>Email</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M21 7.38246601V5H3V7.38199365l9.0000224 4.50046115L21 7.38246601zm0 2.23606798-9.0000224 4.50001121L3 9.61810635V19H21V9.61853399zM3 3H21c1.1045695.0 2 .8954305 2 2V19c0 1.1045695-.8954305 2-2 2H3c-1.1045695.0-2-.8954305-2-2V5c0-1.1045695.8954305-2 2-2z" clip-rule="evenodd"/></svg></a>
<a href=https://t.me/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>Telegram</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.78754 14.0196C5.83131 14.0344 5.87549 14.0448 5.91963 14.0512 5.96777 14.1644 6.02996 14.3107 6.10252 14.4818c.17707.4176.41566.9825.66194 1.5717C7.2667 17.2552 7.77332 18.4939 7.88521 18.8485 8.02372 19.2868 8.17013 19.5848 8.32996 19.7883 8.4126 19.8935 8.50819 19.9853 8.62003 20.0549 8.67633 20.0899 8.7358 20.1186 8.79788 20.14 8.80062 20.141 8.80335 20.1419 8.80608 20.1428 9.1261 20.2636 9.41786 20.2133 9.60053 20.1518 9.69827 20.1188 9.77735 20.0791 9.8334 20.0469 9.86198 20.0304 9.88612 20.0151 9.90538 20.0021L9.90992 19.9991l2.82618-1.7625 3.2646 2.5028C16.0488 20.7763 16.1014 20.8073 16.157 20.8316 16.5492 21.0027 16.929 21.0624 17.2862 21.0136 17.6429 20.9649 17.926 20.8151 18.1368 20.6464 18.3432 20.4813 18.4832 20.2963 18.5703 20.1589 18.6148 20.0887 18.6482 20.0266 18.6718 19.9791 18.6836 19.9552 18.6931 19.9346 18.7005 19.9181L18.7099 19.8963 18.7135 19.8877 18.715 19.8841 18.7156 19.8824 18.7163 19.8808C18.7334 19.8379 18.7466 19.7935 18.7556 19.7482L21.7358 4.72274C21.7453 4.67469 21.7501 4.62581 21.7501 4.57682 21.7501 4.13681 21.5843 3.71841 21.1945 3.46452 20.8613 3.24752 20.4901 3.23818 20.2556 3.25598 20.0025 3.27519 19.7688 3.33766 19.612 3.38757 19.5304 3.41355 19.4619 3.43861 19.4126 3.45773 19.3878 3.46734 19.3675 3.47559 19.3523 3.48188L19.341 3.48666 2.62725 10.0432 2.62509 10.044C2.61444 10.0479 2.60076 10.053 2.58451 10.0593 2.55215 10.0719 2.50878 10.0896 2.45813 10.1126 2.35935 10.1574 2.22077 10.2273 2.07856 10.3247c-.22719.1556-.74968.5817-.6617 1.285.07019.5611.45457.9057.68876 1.0714C2.23421 12.7721 2.35638 12.8371 2.44535 12.8795 2.48662 12.8991 2.57232 12.9339 2.6095 12.9491L2.61889 12.9529l3.16865 1.0667zM19.9259 4.86786 19.9236 4.86888C19.9152 4.8725 19.9069 4.87596 19.8984 4.87928L3.1644 11.4438C3.15566 11.4472 3.14686 11.4505 3.138 11.4536L3.12869 11.4571C3.11798 11.4613 3.09996 11.4686 3.07734 11.4788 3.06451 11.4846 3.05112 11.491 3.03747 11.4978 3.05622 11.5084 3.07417 11.5175 3.09012 11.5251 3.10543 11.5324 3.11711 11.5374 3.1235 11.54l3.14263 1.058C6.32365 12.6174 6.37727 12.643 6.42649 12.674L16.8033 6.59948 16.813 6.59374C16.8205 6.58927 16.8305 6.58353 16.8424 6.5768 16.866 6.56345 16.8984 6.54568 16.937 6.52603 17.009 6.48938 17.1243 6.43497 17.2541 6.39485 17.3444 6.36692 17.6109 6.28823 17.899 6.38064 18.0768 6.43767 18.2609 6.56028 18.3807 6.76798 18.4401 6.87117 18.4718 6.97483 18.4872 7.06972 18.528 7.2192 18.5215 7.36681 18.4896 7.49424 18.4208 7.76875 18.228 7.98287 18.0525 8.14665 17.9021 8.28706 15.9567 10.1629 14.0376 12.0147 13.0805 12.9381 12.1333 13.8525 11.4252 14.5359l-.465.449 5.8719 4.5018C16.9668 19.5349 17.0464 19.5325 17.0832 19.5274 17.1271 19.5214 17.163 19.5045 17.1997 19.4752 17.2407 19.4424 17.2766 19.398 17.3034 19.3557L17.3045 19.354 20.195 4.78102C20.1521 4.79133 20.1087 4.80361 20.0669 4.81691 20.0196 4.83198 19.9805 4.84634 19.9547 4.85637 19.9418 4.86134 19.9326 4.86511 19.9276 4.86719L19.9259 4.86786zM11.4646 17.2618 10.2931 16.3636 10.0093 18.1693 11.4646 17.2618zM9.21846 14.5814l1.16494-1.1247c.7081-.6835 1.6555-1.5979 2.6127-2.5215l.9725-.9382-6.52007 3.8168L7.48351 13.8963c.1777.4191.41736.9864.664940000000001 1.5788.185129999999999.4429.37872.9093.55504 1.3411l.28304-1.8004C9.01381 14.8422 9.09861 14.692 9.21846 14.5814z" clip-rule="evenodd"/></svg></a></div><p class="mt-2 text-base text-center text-gray-400">2018-2023 &copy; Nicholas Zhan. Licensed under <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>CC BY-NC 4.0</a>.</p></div></footer></body></html>