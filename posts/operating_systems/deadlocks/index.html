<!doctype html><html lang=zh-cn><head><meta http-equiv=content-type content="text/html" charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/png sizes=96x96 href=https://zhannicholas.github.io/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=32x32 href=https://zhannicholas.github.io/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://zhannicholas.github.io/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title itemprop=name>操作系统：死锁 | NZ's Digital Garden</title><meta name=description content><meta property="og:title" content="操作系统：死锁 | NZ's Digital Garden"><meta name=twitter:title content="操作系统：死锁 | NZ's Digital Garden"><meta itemprop=name content="操作系统：死锁 | NZ's Digital Garden"><meta name=application-name content="操作系统：死锁 | NZ's Digital Garden"><meta property="og:site_name" content><meta property="og:type" content="website"><meta property="og:title" content="NZ's Digital Garden"><meta property="og:description" content><meta property="og:site_name" content="NZ's Digital Garden"><meta property="og:url" content="https://zhannicholas.github.io/posts/operating_systems/deadlocks/"><meta property="og:locale" content="en"><meta property="og:image" content="/"><meta property="og:image:secure_url" content="https://zhannicholas.github.io"><meta property="og:type" content="website"><script>localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=stylesheet href="/css/style.min.8458c1237ecc4766957580cbadcdbc3827551cb1e8f51d9fa5c37d7473a022e9.css" integrity="sha256-hFjBI37MR2aVdYDLrc28OCdVHLHo9R2fpcN9dHOgIuk="></head><body class="bg-zinc-100 dark:bg-gray-800"><div class="top-0 z-50 w-full text-gray-200 bg-gray-900 border-2 border-gray-900 md:sticky border-b-stone-200/10"><div x-data="{ open: false }" class="flex flex-col max-w-full px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8"><div class="flex flex-row items-center justify-between p-4"><a href=https://zhannicholas.github.io/ class="flex text-gray-100 transition duration-1000 ease-in-out group"><div class="mt-1 text-xl font-black tracking-tight text-gray-100 uppercase transition-colors group-hover:text-gray-400/60">NZ's Digital Garden</div></a><button class="rounded-lg md:hidden focus:outline-none focus:shadow-outline" @click="open = !open" role=navigation aria-expanded=false aria-label=Main aria-controls=menuItems><svg fill="currentcolor" viewBox="0 0 20 20" class="w-6 h-6"><path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm6 5a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"/><path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414.0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div><nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow hidden pb-4 md:pb-0 md:flex md:justify-end md:flex-row"><div @click.away="open = false" class=relative x-data="{ open: false }"><button @click="open = !open" class="flex flex-row items-center w-full px-4 py-2 mt-2 text-sm font-semibold text-left bg-transparent rounded-lg md:w-auto md:inline md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline">
<span>The Garden</span><svg fill="currentcolor" viewBox="0 0 20 20" :class="{'rotate-180': open, 'rotate-0': !open}" class="inline w-4 h-4 mt-1 ml-1 transition-transform duration-200 transform md:-mt-1"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414.0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414.0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button><div x-show=open x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 z-30 w-full mt-2 origin-top-right rounded-md shadow-lg md:w-48"><div class="px-2 py-2 text-primary-900 bg-white rounded-md shadow"><a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/posts>Posts</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-600 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/pages>Notes</a>
<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/library>Library</a></div></div></div><a class="px-4 py-2 mt-2 text-sm font-semibold rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/now>Now</a>
<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg md:mt-0 md:ml-4 hover:text-white focus:text-white hover:bg-primary-600 focus:bg-primary-700 focus:outline-none focus:shadow-outline" href=https://zhannicholas.github.io/about>About</a>
<button id=theme-toggle type=button class="p-2 text-sm text-gray-500 rounded-lg md: dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 md:ml-2 max-w-5 xs:hidden"><svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg><svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentcolor" viewBox="0 0 20 20" aria-label="Dark or Light Mode" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"/></svg></button></nav></div></div><div class=content><article><header class="max-w-2xl mx-auto mb-4 bg-primary-600"><span class=py-96><h1 class="px-6 pt-6 pb-16 mx-auto dark:prose-invert text-5xl font-black text-center text-white capitalize">操作系统：死锁</h1></span></header><div class="max-w-4xl mx-auto mt-8 mb-2"><div class=px-6></div></div><div class="fixed z-20 top-[3.8125rem] bottom-0 right-[max(0px,calc(50%-45rem))] w-[18rem] py-10 overflow-y-auto hidden xl:block"><nav><div class="flex items-center"><h2 class="pl-2 my-0 text-xl font-medium text-zinc-800 uppercase break-words">Table of Contents</h2></div><div class="absolute top-auto bottom-auto right-auto p-0 -left-4" role=menu><div class="relative z-50 max-w-sm m-4 overflow-hidden shadow-lg"><ul class="relative p-4 overflow-x-hidden overflow-y-auto overscroll-y-auto overscroll-x-auto"><li><a class="px-2 text-left text-zinc-700 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%b5%84%e6%ba%90>资源</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e7%9a%84%e7%89%b9%e5%be%81>死锁的特征</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e7%9a%84%e5%bf%85%e8%a6%81%e6%9d%a1%e4%bb%b6>死锁的必要条件</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%b5%84%e6%ba%90%e5%88%86%e9%85%8d%e5%9b%be>资源分配图</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e7%9a%84%e5%a4%84%e7%90%86>死锁的处理</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e9%b8%b5%e9%b8%9f%e7%ae%97%e6%b3%95>鸵鸟算法</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e9%a2%84%e9%98%b2>死锁预防</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e9%81%bf%e5%85%8d>死锁避免</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%ae%89%e5%85%a8%e7%8a%b6%e6%80%81>安全状态</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e8%b5%84%e6%ba%90%e5%88%86%e9%85%8d%e5%9b%be%e7%ae%97%e6%b3%95>资源分配图算法</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e9%93%b6%e8%a1%8c%e5%ae%b6%e7%ae%97%e6%b3%95>银行家算法</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e6%a3%80%e6%b5%8b%e4%b8%8e%e6%81%a2%e5%a4%8d>死锁检测与恢复</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%ad%bb%e9%94%81%e6%a3%80%e6%b5%8b>死锁检测</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e4%bb%8e%e6%ad%bb%e9%94%81%e6%81%a2%e5%a4%8d>从死锁恢复</a></li></ul></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%92%8c%e6%ad%bb%e9%94%81%e7%9b%b8%e5%85%b3%e7%9a%84%e5%85%b6%e5%ae%83%e9%97%ae%e9%a2%98>和死锁相关的其它问题</a><ul><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e6%b4%bb%e9%94%81>活锁</a></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e9%a5%a5%e9%a5%bf>饥饿</a></li></ul></li><li><a class="px-2 text-left text-zinc-900 rounded-md focus:outline-none hover:bg-lightBlue-600 hover:text-white" x-data href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99>参考资料</a></li></ul></div></div></nav></div><div class="max-w-2xl px-6 pt-6 pb-16 mx-auto prose dark:prose-invert dark:text-white"><p>在多道程序设计环境中，多个线程可能会争夺有限的资源。线程先请求资源，若请求不能被立即满足，线程就会进入等待状态。有时候，两个线程各自持有不同的资源并等待对方所持有的资源，这种情况可能导致 <strong>死锁(deadlock)</strong>。死锁的定义为：<em>every process in a set of processes is waiting for an event that can be caused only by another process in the set</em>。虽然定义中使用了进程，但这也适用于线程。</p><h2 id=资源>资源</h2><p>大部分死锁是由线程无法获得互斥资源引起的，这些资源可以是各种硬件设备(如打印机)、也可以是一段信息(如数据库内的记录)。资源种类繁多，一类资源可以具有若干实例，任何一个实例都可以满足对该类资源的请求。简而言之，<strong>资源(resource)</strong> 就是任何能够被获取、使用并最终释放的东西。线程在使用某个资源前必须先请求该资源，并且必须在使用完之后释放它。很明显，线程所请求的资源数量不得超过系统内资源的总量。</p><p>资源可以分为两种：<strong>可抢占的(preemptable)</strong> 和 <strong>不可抢占的(nonpreepmptable)</strong>。通常情况下，死锁和不可抢占资源有关。可抢占资源中潜在的死锁可以通过资源的重分配来化解。</p><p>一般情况下，和使用资源有关的事件如下：</p><ul><li><strong>请求</strong>。线程请求资源，若请求不能被立即满足，线程必须等待。</li><li><strong>使用</strong>。线程在资源上执行某些操作。</li><li><strong>释放</strong>。线程释放资源。</li></ul><p>资源的请求和释放可能是通过系统调用来完成的。例如，某些系统可能提供了诸如<code>request()/release()</code>、<code>open()/close()</code>或<code>wait()/signal()</code>一类的系统调用。对于被内核管理的资源，操作系统会维护一张系统表，表中记录了每个资源是空闲的还是已分配的(还会记录资源被分配给了哪个线程)。如果线程请求的资源已将被分配给其它线程，就将它加入到对应资源的等待队列中。</p><h2 id=死锁的特征>死锁的特征</h2><h3 id=死锁的必要条件>死锁的必要条件</h3><p>当以下四个条件同时满足时，就会出现死锁：</p><ol><li><strong>互斥(Mutual exclusion)</strong>。资源要么因其已被分配给某个线程而不可用，要么就是可用的。</li><li><strong>占有并等待(Hold and wait)</strong>。线程持有至少一个资源并等待其它线程正持有的资源。</li><li><strong>非抢占(No preemption)</strong>。在持有资源的线程完成前，该资源不可被其它线程抢占。</li><li><strong>循环等待(Circular wait)</strong>。一组线程形成等待环路，环路中的每一个线程都在等待下一个线程持有的资源。</li></ol><p>虽然死锁只有在以上四个条件同时满足时才会出现，但这四个条件并不是完全独立的。例如，<em>循环等待</em>条件暗示了<em>占有并等待</em>条件。</p><h3 id=资源分配图>资源分配图</h3><p><strong>系统资源分配图(system resource-allocation graph, RAG)</strong> 是一个有向图，它可以精确的描述死锁。它由一组顶点<code>V</code>和一组边<code>E</code>构成，其中，<code>V</code>又由两部分组成：系统中的所有活动线程<code>T</code>和系统中所有的资源类型<code>R</code>(注意是资源类型而不是资源数量)；<code>E</code>有两种类型：<code>request edge</code>和<code>assignment edge</code>，<code>request edge</code> $T_i \to R_i$ 表示线程 $T_i$ 请求并等待资源 $R_j$ 的实例，而<code>assignment edge</code> $R_j \to T_i$ 表示线程 $T_i$ 已经持有一个资源 $R_j$ 的实例。为了便于识别，我们用圆形表示线程，用矩形表示资源，在矩形内部用点表示资源的实例。</p><p><img src=https://zhannicholas.github.io/images/operating_systems/processes_management/resource-allocation-graph.png alt="Resource-allocation Graph"></p><p>上图展示了这样一个资源分配情况。
集合<code>T</code>、<code>R</code>、<code>E</code>：</p><ul><li>$$T = {T_1, T_2, T_3}$$</li><li>$$R = {R_1, R_2, R_3, R_4}$$</li><li>$$E = {T_1 \to R_1, T_2 \to R_2, R_1 \to T_2, R_2 \to T_1, R_2 \to T2, R_3 \to T_3}$$</li></ul><p>资源实例：</p><ul><li>1个 $R_1$ 实例。</li><li>2个 $R_2$ 实例。</li><li>1个 $R_3$ 实例。</li><li>3个 $R_4$ 实例。</li></ul><p>线程状态：</p><ul><li>线程 $T_1$ 持有1个 $R_2$ 实例并等待一个 $R_1$ 实例。</li><li>线程 $T_2$ 持有1个 $R_1$ 实例和1个 $R_2$ 实例并等待1个 $R_3$ 实例。</li><li>线程 $T_3$ 持有1个 $R_3$ 实例。</li></ul><p>如果资源分配图中没有环，就说明线程之间没有死锁，否则说明<strong>可能</strong>存在死锁。现在来看有环的情况：</p><ul><li>如果每种资源都只有一个实例，那么存在死锁。</li><li>如果环中只包含了资源类型的一个子集，若子集内的每种资源只有一个实例，那么存在死锁。</li><li>如果每种资源有多个实例，那么可能存在死锁。</li></ul><p>下面是一个具有两个环( $T_1 \to R_1 \to T_2 \to R_3 \to T_3 \to R_2 \to T_1 $、 $T_2 \to R_3 \to T_3 \to R_2 \to T_2$ )的资源分配图。线程 $T_1$ 、 $T_2$ 和 $T_3$ 死锁了，线程 $T_2$ 在等 $T_3$ 释放 $R_3$ ，而 $T_3$ 在等 $T_1$ 或 $T_2$ 释放 $R_2$ ，$T1$ 也在等 $T_2$ 释放$R_1$ 。</p><p><img src=https://zhannicholas.github.io/images/operating_systems/processes_management/resource-allocation-graph-with-a-deadlock.png alt="Resource-allocation Graph with a deadlock"></p><p>在看下面这张资源分配图，虽然其中有一个环( $T_1 \to R_1 \to T_2 \to R_2 \to T_1$ )，但不存在死锁。因为线程 $T_4$ 可以释放一个资源 $R_2$ 的实例， $T_3$ 获得这个实例之后图中就不存在环了。</p><p><img src=https://zhannicholas.github.io/images/operating_systems/processes_management/resource-allocation-graph-without-deadlocks.png alt="Resource-allocation Graph without deadlocks"></p><h2 id=死锁的处理>死锁的处理</h2><p>一般而言，我们有四种处理死锁的策略：</p><ol><li>忽略死锁。</li><li>破坏死锁的四个必要条件之一，预防死锁的产生。</li><li>谨慎分配资源，避免死锁的出现。</li><li>检测死锁的发生并设法恢复。</li></ol><h3 id=鸵鸟算法>鸵鸟算法</h3><p>鸵鸟在遇到危险时，会将头埋在沙子里，假装看不见。这是最简单的解决方案，即忽略死锁。</p><h3 id=死锁预防>死锁预防</h3><p>死锁若发生，其四个必要条件必须同时满足。因此，只要能破坏死锁发生的四个必要条件之一，我们就能预防死锁。</p><p>破坏<strong>互斥</strong>条件。因为死锁是在访问共享资源时发生的，若资源不是共享的，那就不可能发生死锁。如果访问共享资源时不需要互斥(例如只读文件)，也不会发生死锁。</p><p>破坏<strong>占有并等待</strong>条件，有两种方法可以破坏它。一种方法是在线程运行之前就为它分配好需要的所有资源，这不太实用，因为大多数程序都是动态申请资源的。另一种方法是只允许线程不持有资源的情况下请求资源。以上两种方法都有缺陷：资源的利用率低，还可能产生饥饿现象。</p><p>破坏<strong>非抢占</strong>条件，我们可以这么干：如果线程在持有一些资源的情况下请求其它<u>不能立即得到</u>的资源，那么让该线程当前持有的资源都可以被抢占。换句话说，线程当前持有的资源是隐式释放了的。原线程可以在被抢占的资源归还后重启，就像这些资源刚被分配给它一样。</p><p>前面三种解决方案在大多数情形下都不太实用，有多种方法可以破坏<strong>循环等待</strong>条件，即避免环路的出现。一种方法时保证每个线程在任何时刻只能占用一个资源，若要请求另一个资源，就必须释放当前持有的资源。另一种方法就是对<u>所有</u>资源进行统一编号，线程可以在任何时刻请求资源，但所有的请求必须按照资源编号的顺序提出，这样不会出现环路。在任何时候，总有一个线程持有已分配资源中编号最大的那个资源(如果有资源被分配的话)，这个线程不能请求其它已分配的各种资源(编号肯定都小于它持有的那个最大编号)，它要么执行完毕，要么去请求编号更高的资源(总是可用的)。最终，它会执行完并释放占有的资源，这是其它的线程也可以以同样的方式执行完。</p><h3 id=死锁避免>死锁避免</h3><p>死锁避免算法通过动态检查资源的分配状态来确保不会发生循环等待。资源分配状态包括资源的可用数量、已分配数量及线程请求的数量。</p><h4 id=安全状态>安全状态</h4><p>如果系统按照某种顺序为每线程分配资源，可以使得每个线程都能拿到资源并执行完成，那么这样的资源分配顺序就是<strong>安全序列(safe sequence)</strong>。只要系统中存在至少一个安全序列，系统就处于<strong>安全状态(safe state)</strong>。反之，系统处于不安全状态，可能出现死锁。若线程序列 $&lt;T_1, T_2, &mldr;, T_n>$ 是一个安全序列，那么对于线程 $T_i$ 而言， $T_i$ 请求的资源数量不大于当前可用资源加上所有 $T_j(j &lt; i)$ 线程所占用的资源之和(当 $T_j$ 执行完成后，会释放其占用的资源)。</p><h4 id=资源分配图算法>资源分配图算法</h4><p>在每种类型的资源都只有一个实例的前提下，我们可以利用RAG来避免死锁的出现。具体做法是：引入一种新的边——<code>claim edge</code>。<code>claim edge</code> $T_i \to R_j$ 表示线程 $T_i$ 在将来可能会请求资源 $R_j$ (<code>claim edge</code>在RAG中用虚线表示)。当线程 $T_i$ 请求资源 $R_j$ 时，就将<code>claim edge</code> $T_i \to R_j$ 转化为<code>request edge</code> $T_i \to R_j$ ；当资源 $R_j$ 被线程 $T_i$ 释放时，就将<code>assignment edge</code> $R_j \to T_i$ 转化为<code>claim edge</code> $T_i \to R_j$ 。</p><p>为了使RAG算法正确工作，只有在线程的所有<code>claim edge</code>被添加到RAG中之后，该线程才能被允许请求资源。或者，线程可以请求已经设置好的<code>claim edge</code>边关联的资源，并且不允许在线程持有资源的情况下添加<code>claim edge</code>到RAG。<code>claim edge</code>实际上起到了延迟RAG中环路出现作用。</p><p>为了更好的说明RAG算法，考虑下图，假设线程 $T_1$ 请求资源 $R_2$ ，尽管 $R_2$ 当前未被占用，但我们也不能把它分配给 $T_1$ 。因为这个举动将导致RAG中出现环路，系统将进入不安全状态。如果 $T_2$ 请求 $R_2$ ，并且 $T_1$ 请求 $R_1$ ，就会出现死锁。</p><p><img src=https://zhannicholas.github.io/images/operating_systems/processes_management/resource-allocation-graph-for-deadlock-avoidance.png alt="Resource-allocation Graph for Deadlock Avoidance"></p><h4 id=银行家算法>银行家算法</h4><p>当资源有多个实例时，RAG算法就无法使用了，这个时候可以使用<strong>银行家算法(banker&rsquo;s algorithm)</strong>。算法要做的就是判断满足线程的资源请求是否会导致系统进入不安全状态，若是，则拒绝请求，否则予以分配，系统继续处于安全状态。</p><p>为了实现银行家算法，我们需要维护几个和资源分配状态有关的数据结构，其中<code>n</code>代表线程数，<code>m</code>代表资源种类数：</p><ul><li><strong>Available</strong>。<code>m</code>维向量，其中<code>Available[i]</code>表示资源 $R_i$ 的可用实例数。</li><li><strong>Max</strong>。<code>n x m</code>维矩阵，其中<code>Max[i][j]</code>表示线程 $T_i$ 对资源 $R_j$ 的最大需求数。</li><li><strong>Allocation</strong>。<code>n x m</code>维矩阵，其中<code>Allocation[i][j]</code>表示线程 $T_i$ 当前持有资源 $R_j$ 的实例数。</li><li><strong>Need</strong>。<code>n x m</code>维矩阵，其中<code>Need[i][j]</code>表示线程 $T_i$ 要完成工作还需要的资源 $R_j$的实例数。注意：<code>Need[i][j] = Max[i][j] - Allocation[i][j]</code>。</li></ul><p>为了简化算法的表示，我们定义，对于长度为<code>n</code>的向量<code>A</code>和向量<code>B</code>，<code>A ≤ B if and only if A[i] ≤ B[i] for all i = 1,2,...,n</code>。</p><h5 id=安全性算法>安全性算法</h5><p>为了使用银行家算法，我们需要判断系统是否处于安全状态。检测系统是否处于安全状态的算法如下：</p><ol><li>设<code>Work</code>和<code>Finish</code>分别是长度为<code>m</code>和<code>n</code>的向量。<code>Work</code>为可用资源的一个工作副本，它可以在分析过程中被修改，初始值为<code>Available</code>。<code>Finish</code>是一个布尔类型的向量，用来表示某个线程是否能够执行完成，其所有元素均初始化为<code>false</code>。</li><li>找到一个满足<code>Finish[i] == false && Need[i] ≤ Work</code>的<code>i</code>。满足条件的线程还未完成，但可以为其分配资源。如果不存在这样的<code>i</code>，跳转到步骤4。</li><li><code>Work = Work + Allocation[i]</code>，<code>Finish[i] = true</code>。这表示线程<code>i</code>执行完成并将其占用的资源归还到工作池。跳转到步骤2。</li><li>如果所有的<code>i</code>都满足<code>Finish[i] == true</code>，那么系统当前处于安全状态，因为我们找到了一个安全序列。</li></ol><p>为了判断系统是否处于安全状态，算法可能需要执行 $m \times n^2$ 次。</p><h5 id=资源请求算法银行家算法>资源请求算法(银行家算法)</h5><p><strong>资源请求算法(Resource-Request Algorithm)</strong> 用来判断某个请求的安全性，只有一个请求是安全的，才为其分配资源。若满足某个请求后系统仍处于安全状态，那么这个请求就是安全的。用<code>Request[i][j]</code>表示线程 $T_i$ 请求资源 $R_j$ 的实例数，当线程 $T_i$ 发出一个资源请求时，将按照以下步骤处理：</p><ol><li>若<code>Request[i] ≤ Need[i]</code>，跳转步骤2。否则抛出错误，因为线程请求的资源数超过了它需要的最大值。</li><li>若<code>Request[i] ≤ Available</code>，跳转步骤3。否则，由于资源不够，线程 $T_i$ 必须等待。</li><li>检查是否可以安全地满足<code>Request[i]</code>。先假装请求的资源已被授予，然后运行安全性算法检查系统是否仍然处于安全状态。若是，满足<code>Request[i]</code>，否则线程 $T_i$ 必须等待直到<code>Request[i]</code>变成安全的。假装分配资源的伪代码为：<ul><li>可用资源减少：<code>Available = Available - Request[i];</code></li><li>已分配资源增加：<code>Allocation[i] = Allocaion[i] + Request[i];</code></li><li>资源需求量减少：<code>Need[i] = Need[i] - Request[i]</code>。</li></ul></li></ol><h5 id=一个例子>一个例子</h5><p>假设系统中有5个线程，10个资源A实例、5个资源B实例和7个资源C实例，系统当前的快照状态如下：</p><table><thead><tr><th>线程</th><th>Allocation(A, B, C)</th><th>Max(A, B, C)</th><th>Available(A, B, C)</th><th>Need(A, B, C)</th></tr></thead><tbody><tr><td>$$T_0$$</td><td>(0, 1, 0)</td><td>(7, 5, 3)</td><td>(3, 3, 2)</td><td>(7, 4, 3)</td></tr><tr><td>$$T_1$$</td><td>(2, 0, 0)</td><td>(3, 2, 2)</td><td></td><td>(1, 2, 2)</td></tr><tr><td>$$T_2$$</td><td>(3, 0, 2)</td><td>(9, 0, 2)</td><td></td><td>(6, 0, 0)</td></tr><tr><td>$$T_3$$</td><td>(2, 1, 1)</td><td>(2, 2, 2)</td><td></td><td>(0, 1, 1)</td></tr><tr><td>$$T_4$$</td><td>(0, 0, 2)</td><td>(4, 3, 3)</td><td></td><td>(4, 3, 1)</td></tr></tbody></table><p>运行银行家算法可以发现当前系统处于安全状态，因为存在一个安全序列 $&lt;T_1, T_3, T_4, T_2, T_0>$ 。</p><p>假设现在线程 $T_1$ 需要请求1个资源A和2个资源C，即<code>Request[1] = (1, 0, 2)</code>。为了判断<code>Request[1]</code>是否是安全的，我们先检查<code>Request[i] ≤ Available</code>，条件成立，现在假装<code>Request[1]</code>已被满足，系统将进入一个新的状态：</p><table><thead><tr><th>线程</th><th>Allocation(A, B, C)</th><th>Max(A, B, C)</th><th>Available(A, B, C)</th><th>Need(A, B, C)</th></tr></thead><tbody><tr><td>$$T_0$$</td><td>(0, 1, 0)</td><td>(7, 5, 3)</td><td>(2, 3, 0)</td><td>(7, 4, 3)</td></tr><tr><td>$$T_1$$</td><td>(3, 0, 2)</td><td>(3, 2, 2)</td><td></td><td>(0, 2, 0)</td></tr><tr><td>$$T_2$$</td><td>(3, 0, 2)</td><td>(9, 0, 2)</td><td></td><td>(6, 0, 0)</td></tr><tr><td>$$T_3$$</td><td>(2, 1, 1)</td><td>(2, 2, 2)</td><td></td><td>(0, 1, 1)</td></tr><tr><td>$$T_4$$</td><td>(0, 0, 2)</td><td>(4, 3, 3)</td><td></td><td>(4, 3, 1)</td></tr></tbody></table><p>现在检查系统是否处于安全状态，运行安全性算法，我们可以找到安全序列 $&lt;T_1, T_3, T_4, T_0, T_2>$ 。因此我们可以立即满足线程 $T_1$ 的请求。满足线程 $T_1$ 的请求之后，假设线程 $T_0$ 又来请求资源，<code>Request[0] = (0, 2, 0)</code>，因为<code>(0, 2, 0) ≤ （2, 3, 0)</code>，所以我们假装资源已分配，系统的状态如下：</p><table><thead><tr><th>线程</th><th>Allocation(A, B, C)</th><th>Max(A, B, C)</th><th>Available(A, B, C)</th><th>Need(A, B, C)</th></tr></thead><tbody><tr><td>$$T_0$$</td><td>(0, 3, 0)</td><td>(7, 5, 3)</td><td>(2, 1, 0)</td><td>(7, 2, 3)</td></tr><tr><td>$$T_1$$</td><td>(3, 0, 2)</td><td>(3, 2, 2)</td><td></td><td>(0, 2, 0)</td></tr><tr><td>$$T_2$$</td><td>(3, 0, 2)</td><td>(9, 0, 2)</td><td></td><td>(6, 0, 0)</td></tr><tr><td>$$T_3$$</td><td>(2, 1, 1)</td><td>(2, 2, 2)</td><td></td><td>(0, 1, 1)</td></tr><tr><td>$$T_4$$</td><td>(0, 0, 2)</td><td>(4, 3, 3)</td><td></td><td>(4, 3, 1)</td></tr></tbody></table><p>运行安全性算法会发现，我们找不到任何安全序列，所以不能满足线程 $T_0$ 的这个请求。</p><h3 id=死锁检测与恢复>死锁检测与恢复</h3><p>当系统既不能预防也不能避免死锁，那死锁就有可能出现。这个时候，系统可能就需要具备检测死锁的存在并从死锁恢复的能力了。</p><h4 id=死锁检测>死锁检测</h4><h5 id=每类资源只有一个实例的死锁检测>每类资源只有一个实例的死锁检测</h5><p>当RAG中存在环路时，可能存在死锁。因此，我们检测RAG中是否存在环路即可。</p><h5 id=每类资源有多个实例的死锁检测>每类资源有多个实例的死锁检测</h5><p>当每类资源有多个实例时，我们可以利用银行家算法中的数据结构并稍微修改安全性算法来检测死锁的存在。算法如下：</p><ol><li>设<code>Work</code>和<code>Finish</code>分别是长度为<code>m</code>和<code>n</code>的向量。<code>Work</code>为可用资源的一个工作副本，它可以在分析过程中被修改，初始值为<code>Available</code>。<code>Finish</code>是一个布尔类型的向量，用来表示某个线程是否已经完成。若<code>Available[i] = 0</code>，则<code>Finish[i] = true</code>，否则<code>Finish[i] = false</code>。</li><li>找到一个满足<code>Finish[i] == false && Request[i] ≤ Work</code>的<code>i</code>。满足条件的线程还未完成，但可以为其分配资源。如果不存在这样的<code>i</code>，跳转到步骤4。</li><li><code>Work = Work + Allocation[i]</code>，<code>Finish[i] = true</code>。这表示线程<code>i</code>执行完成并将其占用的资源归还到工作池。跳转到步骤2。</li><li>若存在<code>i</code>，使<code>Finish[i] == false</code>，那么系统中存在死锁。<code>Finish[i] == false</code>的线程就是已经发生死锁的线程。</li></ol><p>假设系统中有5个线程，7个资源A实例、2个资源B实例和6个资源C实例，系统当前的快照状态如下：</p><table><thead><tr><th>线程</th><th>Allocation(A, B, C)</th><th>Request(A, B, C)</th><th>Available(A, B, C)</th></tr></thead><tbody><tr><td>$$T_0$$</td><td>(0, 1, 0)</td><td>(0, 0, 0)</td><td>(0, 0, 0)</td></tr><tr><td>$$T_1$$</td><td>(2, 0, 0)</td><td>(2, 0, 2)</td><td></td></tr><tr><td>$$T_2$$</td><td>(3, 0, 3)</td><td>(0, 0, 0)</td><td></td></tr><tr><td>$$T_3$$</td><td>(2, 1, 1)</td><td>(1, 0, 0)</td><td></td></tr><tr><td>$$T_4$$</td><td>(0, 0, 2)</td><td>(0, 0, 2)</td><td></td></tr></tbody></table><p>运行死锁检测算法，我们可以找到安全序列 $&lt;T_0, T_2, T_3, T_1, T_4>$ 使得<code>Finish</code>中所有元素均为<code>true</code>，因此当前系统中没有死锁。若当前系统的状态为(线程 $T_2$ 多请求了一个资源C)：</p><table><thead><tr><th>线程</th><th>Allocation(A, B, C)</th><th>Request(A, B, C)</th><th>Available(A, B, C)</th></tr></thead><tbody><tr><td>$$T_0$$</td><td>(0, 1, 0)</td><td>(0, 0, 0)</td><td>(0, 0, 0)</td></tr><tr><td>$$T_1$$</td><td>(2, 0, 0)</td><td>(2, 0, 2)</td><td></td></tr><tr><td>$$T_2$$</td><td>(3, 0, 3)</td><td>(0, 0, 1)</td><td></td></tr><tr><td>$$T_3$$</td><td>(2, 1, 1)</td><td>(1, 0, 0)</td><td></td></tr><tr><td>$$T_4$$</td><td>(0, 0, 2)</td><td>(0, 0, 2)</td><td></td></tr></tbody></table><p>这个时候系统就存在死锁了。尽管我们可以回收线程 $T_0$ 占用的资源，但也无济于事，线程 $T_1$ 、 $T_2$ 、 $T_3$ 和 $T_4$ 死锁了。</p><h5 id=死锁检测算法的使用>死锁检测算法的使用</h5><p>现在我们已经有死锁检测算法了，接下来的问题是何时去检测它们。一种方法是每当有资源请求时就去检测，虽然越早发现死锁越好，但这可能占用大量的CPU时间。另一种方法是每隔一段时间就检查一次，或者当CPU使用率降到一定阈值以下时去检查。考虑到CPU的使用效率，如果死锁线程达到了一定数量，就没多少线程可以运行了，所以CPU会经常空闲。</p><h4 id=从死锁恢复>从死锁恢复</h4><p>当我们成功检测到了死锁，下一步就是采取一些方法使系统重新正常工作：</p><ol><li><strong>利用抢占恢复</strong>。临时将资源从一个线程抢占到另一个线程，另一个线程使用完就送回原线程。</li><li><strong>回滚</strong>。周期性的创建检查点，当检测到死锁时，回退到某个之前的检查点继续。</li><li><strong>杀死进程</strong>。杀死一个或多个进程，使之释放资源，便于其它线程正常运行。</li></ol><h2 id=和死锁相关的其它问题>和死锁相关的其它问题</h2><h3 id=活锁>活锁</h3><p><strong>活锁(livelock)</strong> 不会阻塞线程，但线程也不能继续执行，因为线程将不断重复执行相同的操作，而且总会失败。这就像两个过于礼貌的人在半路上面对面地相遇：他们彼此都给对方让路，然后又在另一条路上相遇了，并且他们就这样反复地避让下去。可以在重试机制中引入 <strong>随机性</strong> 来解决问题，这样能减少冲突。</p><h3 id=饥饿>饥饿</h3><p>当线程由于无法访问它所需要的资源而不能继续执行时，就发生了<strong>饥饿(Starvation)</strong>。例如：Java应用程序对线程的优先级设置不当，导致部分线程无法获取CPU时钟周期。可以通过FIFO策略来避免饥饿，也可以在引入老化机制，动态的调整线程优先级，使每个线程的优先级都有机会变成最高的。</p><h2 id=参考资料>参考资料</h2><ol><li>ANDREW S. TANENBAUM, HERBERT BOS. <em>Modern Operating Systems, 4th Edition</em>. Pearson, 2015.</li><li>Abraham Silberschatz, Greg Gagne, Peter B. Galvin. <em>Operating System Concepts, 10th Edition</em>. Wiley, 2018.</li></ol></div><hr><aside><h4>No linked references</h4></aside><br><aside class=related><h3 class="text-2xl font-black tracking-tight text-primary-500 capitalize dark:text-primary-300 sm:text-2xl">Related Content</h3><ul><p class="inline-flex items-center rounded-md bg-gray-300 hover:bg-primary-200 hover:text-black px-2.5 py-0.5 text-sm font-medium text-gray-900 capitalize"><a style=color:var(--link) href=https://zhannicholas.github.io/posts/operating_systems/main_memory>操作系统：主存</a></p><p class="inline-flex items-center rounded-md bg-gray-300 hover:bg-primary-200 hover:text-black px-2.5 py-0.5 text-sm font-medium text-gray-900 capitalize"><a style=color:var(--link) href=https://zhannicholas.github.io/posts/operating_systems/operating_systems>操作系统所处的位置</a></p></ul></aside></article></div><div x-cloak x-data="{ atTop: false }"><button id=scrollToTop name="scroll to top button" aria-label="scroll to top button" class="fixed z-50 w-10 h-10 font-bold text-center text-white transition-all duration-1000 ease-in-out transform bg-violet-600 rounded-full cursor-pointer animate-bounce bottom-24 right-8 focus:outline-none" :class="{ 'opacity-0 translate-y-24': !atTop, 'opacity-1 translate-y-2' :  atTop}" @click="window.scrollTo({ top: 0, behavior: 'smooth'})" @scroll.window="atTop = (window.pageYOffset > 200)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0 3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"/></svg></button></div><script src=https://zhannicholas.github.io/js/alpine.js defer></script>
<script src=https://zhannicholas.github.io/js/darkmode.js defer></script><footer class=bg-gray-900><div class="max-w-md px-4 py-12 mx-auto overflow-hidden sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8"><nav class="flex flex-wrap justify-center -mx-5 -my-2" aria-label=Footer><div class="px-5 py-2"><a href=https://zhannicholas.github.io/about class="text-base text-gray-400 hover:text-gray-300">About</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/posts class="text-base text-gray-400 hover:text-gray-300">Posts</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/pages class="text-base text-gray-400 hover:text-gray-300">Notes</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/library class="text-base text-gray-400 hover:text-gray-300">Library</a></div><div class="px-5 py-2"><a href=https://zhannicholas.github.io/contact/ class="text-base text-gray-400 hover:text-gray-300">Contact</a></div></nav><div class="flex justify-center mt-2 space-x-6"><a href=https://github.com/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>GitHub</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483.0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951.0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65.0.0.84-.27 2.75 1.026A9.564 9.564.0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688.0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855.0 1.338-.012 2.419-.012 2.747.0.268.18.58.688.482A10.019 10.019.0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg></a>
<a href=mailto:zhan_nicholas@outlook.com class="text-gray-400 hover:text-gray-300"><span class=sr-only>Email</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M21 7.38246601V5H3V7.38199365l9.0000224 4.50046115L21 7.38246601zm0 2.23606798-9.0000224 4.50001121L3 9.61810635V19H21V9.61853399zM3 3H21c1.1045695.0 2 .8954305 2 2V19c0 1.1045695-.8954305 2-2 2H3c-1.1045695.0-2-.8954305-2-2V5c0-1.1045695.8954305-2 2-2z" clip-rule="evenodd"/></svg></a>
<a href=https://t.me/zhannicholas class="text-gray-400 hover:text-gray-300"><span class=sr-only>Telegram</span><svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.78754 14.0196C5.83131 14.0344 5.87549 14.0448 5.91963 14.0512 5.96777 14.1644 6.02996 14.3107 6.10252 14.4818c.17707.4176.41566.9825.66194 1.5717C7.2667 17.2552 7.77332 18.4939 7.88521 18.8485 8.02372 19.2868 8.17013 19.5848 8.32996 19.7883 8.4126 19.8935 8.50819 19.9853 8.62003 20.0549 8.67633 20.0899 8.7358 20.1186 8.79788 20.14 8.80062 20.141 8.80335 20.1419 8.80608 20.1428 9.1261 20.2636 9.41786 20.2133 9.60053 20.1518 9.69827 20.1188 9.77735 20.0791 9.8334 20.0469 9.86198 20.0304 9.88612 20.0151 9.90538 20.0021L9.90992 19.9991l2.82618-1.7625 3.2646 2.5028C16.0488 20.7763 16.1014 20.8073 16.157 20.8316 16.5492 21.0027 16.929 21.0624 17.2862 21.0136 17.6429 20.9649 17.926 20.8151 18.1368 20.6464 18.3432 20.4813 18.4832 20.2963 18.5703 20.1589 18.6148 20.0887 18.6482 20.0266 18.6718 19.9791 18.6836 19.9552 18.6931 19.9346 18.7005 19.9181L18.7099 19.8963 18.7135 19.8877 18.715 19.8841 18.7156 19.8824 18.7163 19.8808C18.7334 19.8379 18.7466 19.7935 18.7556 19.7482L21.7358 4.72274C21.7453 4.67469 21.7501 4.62581 21.7501 4.57682 21.7501 4.13681 21.5843 3.71841 21.1945 3.46452 20.8613 3.24752 20.4901 3.23818 20.2556 3.25598 20.0025 3.27519 19.7688 3.33766 19.612 3.38757 19.5304 3.41355 19.4619 3.43861 19.4126 3.45773 19.3878 3.46734 19.3675 3.47559 19.3523 3.48188L19.341 3.48666 2.62725 10.0432 2.62509 10.044C2.61444 10.0479 2.60076 10.053 2.58451 10.0593 2.55215 10.0719 2.50878 10.0896 2.45813 10.1126 2.35935 10.1574 2.22077 10.2273 2.07856 10.3247c-.22719.1556-.74968.5817-.6617 1.285.07019.5611.45457.9057.68876 1.0714C2.23421 12.7721 2.35638 12.8371 2.44535 12.8795 2.48662 12.8991 2.57232 12.9339 2.6095 12.9491L2.61889 12.9529l3.16865 1.0667zM19.9259 4.86786 19.9236 4.86888C19.9152 4.8725 19.9069 4.87596 19.8984 4.87928L3.1644 11.4438C3.15566 11.4472 3.14686 11.4505 3.138 11.4536L3.12869 11.4571C3.11798 11.4613 3.09996 11.4686 3.07734 11.4788 3.06451 11.4846 3.05112 11.491 3.03747 11.4978 3.05622 11.5084 3.07417 11.5175 3.09012 11.5251 3.10543 11.5324 3.11711 11.5374 3.1235 11.54l3.14263 1.058C6.32365 12.6174 6.37727 12.643 6.42649 12.674L16.8033 6.59948 16.813 6.59374C16.8205 6.58927 16.8305 6.58353 16.8424 6.5768 16.866 6.56345 16.8984 6.54568 16.937 6.52603 17.009 6.48938 17.1243 6.43497 17.2541 6.39485 17.3444 6.36692 17.6109 6.28823 17.899 6.38064 18.0768 6.43767 18.2609 6.56028 18.3807 6.76798 18.4401 6.87117 18.4718 6.97483 18.4872 7.06972 18.528 7.2192 18.5215 7.36681 18.4896 7.49424 18.4208 7.76875 18.228 7.98287 18.0525 8.14665 17.9021 8.28706 15.9567 10.1629 14.0376 12.0147 13.0805 12.9381 12.1333 13.8525 11.4252 14.5359l-.465.449 5.8719 4.5018C16.9668 19.5349 17.0464 19.5325 17.0832 19.5274 17.1271 19.5214 17.163 19.5045 17.1997 19.4752 17.2407 19.4424 17.2766 19.398 17.3034 19.3557L17.3045 19.354 20.195 4.78102C20.1521 4.79133 20.1087 4.80361 20.0669 4.81691 20.0196 4.83198 19.9805 4.84634 19.9547 4.85637 19.9418 4.86134 19.9326 4.86511 19.9276 4.86719L19.9259 4.86786zM11.4646 17.2618 10.2931 16.3636 10.0093 18.1693 11.4646 17.2618zM9.21846 14.5814l1.16494-1.1247c.7081-.6835 1.6555-1.5979 2.6127-2.5215l.9725-.9382-6.52007 3.8168L7.48351 13.8963c.1777.4191.41736.9864.664940000000001 1.5788.185129999999999.4429.37872.9093.55504 1.3411l.28304-1.8004C9.01381 14.8422 9.09861 14.692 9.21846 14.5814z" clip-rule="evenodd"/></svg></a></div><p class="mt-2 text-base text-center text-gray-400">2018-2023 &copy; Nicholas Zhan. Licensed under <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>CC BY-NC 4.0</a>.</p><p class="mt-2 text-base text-center text-gray-400">Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://github.com/sawhney17/logseq-schrodinger>logseq-schrodinger</a>.</p></div></footer></body></html>