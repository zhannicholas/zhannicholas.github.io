<!doctype html><html lang=zh-cn dir=auto><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="年初学过几天 Rust，走马观花，很快就忘完了。现在有了些空闲时间，准备重新好好地把 Rust 学一遍，为后续操作系统的深入学习做好铺垫。在此之前，我主">
<meta name=theme-color content="#ffcd00">
<meta property="og:title" content="Hello, Rust! • Nicholas Zhan">
<meta property="og:description" content="年初学过几天 Rust，走马观花，很快就忘完了。现在有了些空闲时间，准备重新好好地把 Rust 学一遍，为后续操作系统的深入学习做好铺垫。在此之前，我主">
<meta property="og:url" content="https://zhannicholas.github.io/rust/hello_rust/">
<meta property="og:site_name" content="Nicholas Zhan">
<meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/85f2cc2a45fd9533b91a65214224f9d7?s=256"><meta property="article:section" content="rust"><meta property="article:tag" content="Rust"><meta property="article:published_time" content="2021-09-02T19:45:08+08:00"><meta property="article:modified_time" content="2021-09-02T19:45:08+08:00"><meta name=twitter:card content="summary">
<meta name=generator content="Hugo 0.90.0">
<title>Hello, Rust! • Nicholas Zhan</title>
<link rel=canonical href=https://zhannicholas.github.io/rust/hello_rust/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style>
</head>
<body class="page type-rust has-sidebar">
<div class=site><div id=sidebar class=sidebar>
<a class=screen-reader-text href=#main-menu>跳到主菜单</a>
<div class=container><section class="widget widget-about sep-after">
<header>
<div class=logo>
<a href=/>
<img src=/images/logo.png>
</a>
</div>
<h2 class="title site-title">
<a href=/>
Nicholas Zhan
</a>
</h2>
<div class=desc>
Java Developer, Runner, Cyclist
</div>
</header>
</section>
<section class="widget widget-search sep-after">
<header>
<h4 class="title widget-title">搜索</h4>
</header>
<form action=/search id=search-form class=search-form>
<label>
<span class=screen-reader-text>搜索</span>
<input id=search-term class=search-term type=search name=q placeholder=搜索&mldr;>
</label></form>
</section>
<section class="widget widget-sidebar_menu sep-after"><nav id=sidebar-menu class="menu sidebar-menu" aria-label=侧边栏菜单>
<div class=container>
<ul><li class="item has-children">
<a href=/java/>Java</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/java/jakartaee/>Jakarta EE</a></li><li class=item>
<a href=/java/jvm/>JVM</a></li><li class=item>
<a href=/java/concurrency/>并发</a></li></ul></li><li class="item has-current">
<a href=/rust/>Rust</a></li><li class=item>
<a href=/distributed_computing/>分布式计算</a></li><li class=item>
<a href=/operating_systems/>操作系统</a></li><li class="item has-children">
<a href=/computer_networks/>计算机网络</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/computer_networks/http/>HTTP</a></li><li class=item>
<a href=/computer_networks/fundamentals/>基础知识</a></li></ul></li></ul>
</div>
</nav>
</section><section class="widget widget-taxonomy_cloud sep-after">
<header>
<h4 class="title widget-title">标签</h4>
</header>
<div class="container list-container">
<ul class="list taxonomy-cloud"><li>
<a href=/tags/communication/ style=font-size:1em>Communication</a>
</li><li>
<a href=/tags/c%E7%AE%97%E6%B3%95/ style=font-size:1.263157894736842em>C算法</a>
</li><li>
<a href=/tags/english/ style=font-size:1em>English</a>
</li><li>
<a href=/tags/gc/ style=font-size:1.1052631578947367em>GC</a>
</li><li>
<a href=/tags/git/ style=font-size:1em>Git</a>
</li><li>
<a href=/tags/http/ style=font-size:1.368421052631579em>HTTP</a>
</li><li>
<a href=/tags/hugo/ style=font-size:1em>Hugo</a>
</li><li>
<a href=/tags/jakartaee/ style=font-size:1.1052631578947367em>JakartaEE</a>
</li><li>
<a href=/tags/java/ style=font-size:2em>Java</a>
</li><li>
<a href=/tags/jdbc/ style=font-size:1em>JDBC</a>
</li><li>
<a href=/tags/jvm/ style=font-size:1.1578947368421053em>JVM</a>
</li><li>
<a href=/tags/leetcode/ style=font-size:1.1052631578947367em>Leetcode</a>
</li><li>
<a href=/tags/life/ style=font-size:1em>Life</a>
</li><li>
<a href=/tags/linux/ style=font-size:1.1578947368421053em>Linux</a>
</li><li>
<a href=/tags/mybatis/ style=font-size:1em>MyBatis</a>
</li><li>
<a href=/tags/networks/ style=font-size:1.1052631578947367em>Networks</a>
</li><li>
<a href=/tags/os/ style=font-size:1.3157894736842106em>OS</a>
</li><li>
<a href=/tags/ostep/ style=font-size:1.1052631578947367em>OSTEP</a>
</li><li>
<a href=/tags/python/ style=font-size:1em>Python</a>
</li><li>
<a href=/tags/redis/ style=font-size:1.368421052631579em>Redis</a>
</li><li>
<a href=/tags/rpc/ style=font-size:1em>RPC</a>
</li><li>
<a href=/tags/rust/ style=font-size:1.368421052631579em>Rust</a>
</li><li>
<a href=/tags/shell/ style=font-size:1.263157894736842em>Shell</a>
</li><li>
<a href=/tags/sicp/ style=font-size:1em>SICP</a>
</li><li>
<a href=/tags/spring/ style=font-size:1em>Spring</a>
</li><li>
<a href=/tags/spring-boot/ style=font-size:1em>Spring Boot</a>
</li><li>
<a href=/tags/tomcat/ style=font-size:1em>Tomcat</a>
</li><li>
<a href=/tags/zookeeper/ style=font-size:1em>ZooKeeper</a>
</li><li>
<a href=/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/ style=font-size:1.0526315789473684em>分布式计算</a>
</li><li>
<a href=/tags/%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF/ style=font-size:1.0526315789473684em>多处理器编程的艺术</a>
</li><li>
<a href=/tags/%E5%B7%A5%E7%A8%8B%E6%80%9D%E7%BB%B4/ style=font-size:1em>工程思维</a>
</li><li>
<a href=/tags/%E5%B9%B6%E5%8F%91/ style=font-size:1.3157894736842106em>并发</a>
</li><li>
<a href=/tags/%E6%90%9C%E7%B4%A2/ style=font-size:1em>搜索</a>
</li><li>
<a href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/ style=font-size:1.0526315789473684em>数据库</a>
</li><li>
<a href=/tags/%E6%B8%B8%E8%AE%B0/ style=font-size:1em>游记</a>
</li><li>
<a href=/tags/%E7%8E%B0%E4%BB%A3%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ style=font-size:1.0526315789473684em>现代操作系统</a>
</li><li>
<a href=/tags/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85/ style=font-size:1em>生产者消费者</a>
</li><li>
<a href=/tags/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/ style=font-size:1.1578947368421053em>算法导论</a>
</li><li>
<a href=/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/ style=font-size:1em>设计原则</a>
</li><li>
<a href=/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ style=font-size:1.631578947368421em>设计模式</a>
</li></ul>
</div>
</section>
</div>
<div class=sidebar-overlay></div>
</div><div class=main><nav id=main-menu class="menu main-menu" aria-label=主菜单>
<div class=container>
<a class=screen-reader-text href=#content>跳到内容</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</span>
<span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</span>
</button>
<ul><li class=item>
<a href=/>主页</a>
</li><li class=item>
<a href=/posts/>博客</a>
</li><li class=item>
<a href=/notebook/>笔记本</a>
</li><li class=item>
<a href=/itinerary/>游山玩水</a>
</li></ul>
</div>
</nav><div class=header-widgets>
<div class=container>
<style>.widget-breadcrumbs li:after{content:'\2f '}</style>
<section class="widget widget-breadcrumbs sep-after">
<nav id=breadcrumbs>
<ol><li><a href=/>主页</a></li><li><a href=/rust/>Rust</a></li><li><span>Hello, Rust!</span></li></ol>
</nav>
</section></div>
</div>
<header id=header class="header site-header">
<div class="container sep-after">
<div class=header-info><p class="site-title title">Nicholas Zhan</p><p class="desc site-desc">Java Developer, Runner, Cyclist</p>
</div>
</div>
</header>
<main id=content>
<article lang=zh-cn class=entry>
<header class="header entry-header">
<div class="container sep-after">
<div class=header-info>
<h1 class=title>Hello, Rust!</h1>
</div>
<div class=entry-meta>
<span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span class=screen-reader-text>Posted on </span>
<time class=entry-date datetime=2021-09-02T19:45:08+08:00>2021, Sep 02</time>
</span>
<span class=byline><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M21 21V20c0-2.76-4-5-9-5s-9 2.24-9 5v1"/><path d="M16 6.37A4 4 0 1112.63 3 4 4 0 0116 6.37z"/></svg>
<span class=screen-reader-text> by </span><a href=/authors/zhannicholas>Nicholas Zhan</a></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>
7 mins read
</span>
</div>
</div>
</header>
<details class="container entry-toc">
<summary class=title>
<span>目录</span>
</summary>
<nav id=TableOfContents>
<ul>
<li><a href=#安装-rust>安装 Rust</a></li>
<li><a href=#rustup>rustup</a></li>
<li><a href=#hello-world>Hello, world!</a></li>
<li><a href=#hello-world-详解>Hello, world! 详解</a></li>
<li><a href=#从编译到运行>从编译到运行</a></li>
<li><a href=#cargo>Cargo</a>
<ul>
<li><a href=#使用-cargo-创建新项目>使用 cargo 创建新项目</a></li>
<li><a href=#构建并运行-cargo-项目>构建并运行 Cargo 项目</a></li>
<li><a href=#使用-cargo-check-检查错误>使用 <code>cargo check</code> 检查错误</a></li>
<li><a href=#profiles>profiles</a></li>
</ul>
</li>
<li><a href=#参考资料>参考资料</a></li>
</ul>
</nav>
</details>
<div class="container entry-content">
<blockquote>
<p>年初学过几天 Rust，走马观花，很快就忘完了。现在有了些空闲时间，准备重新好好地把 Rust 学一遍，为后续操作系统的深入学习做好铺垫。在此之前，我主要写 Java，几乎所有的 Java 开发者都有过内存溢出（OOM）或内存泄露的噩梦。为了避免各种内存问题，Java 开发者通常需要熟悉垃圾回收，以及如何进行垃圾收集器的调优。当我第一次遇到 Rust 的时候，就被 Rust 惊人的运行速度和极高的内存利用率所吸引，这门语言居然没有运行时（runtime）和垃圾回收器（garbage collector），多么地神奇！</p>
</blockquote>
<h2 id=安装-rust>安装 Rust</h2>
<p>学习一门编程语言的最佳方式就是实践。在实践之前，我们需要准备好相应的开发环境。Rust 推荐我们使用 <a href=https://github.com/rust-lang/rustup.rs><code>rustup</code></a> 安装 Rust。<code>rustup</code> 是一个命令行工具，用于管理 Rust 版本和相关的其它工具。在 Windows 平台上，我只需要先下载 <code>rustup</code>，运行它，然后根据提示一步一步操作即可。除了 <code>rustup</code>，还有很多其它的安装方法，具体可以参考<a href=https://forge.rust-lang.org/infra/other-installation-methods.html>官方文档</a>。</p>
<p>安装完成后，我们可以通过 <code>rustc --version</code> 检查是否安装成功。若控制台输出了 <code>rustc x.y.z (abcabcabc yyyy-mm-dd)</code> 形式的版本号，则表示安装成功。</p>
<h2 id=rustup>rustup</h2>
<p><code>rustup</code> 是一个很有用的工具，它给我们提供了很多实用的功能。</p>
<ul>
<li>更新 Rust 到最新版本：<code>rustup update</code></li>
<li>卸载 Rust 和 <code>rustup</code>：<code>rustup self uninstall</code></li>
<li>查看 Rust 的本地文档：<code>rustup doc</code></li>
</ul>
<h2 id=hello-world>Hello, world!</h2>
<p>从大学的 C/C++，到后来的 Java、Python，我们学习一门新的编程语言几乎都是从“Hello, world!”开始。下面来写一个 Rust 版本的“Hello, world!”。</p>
<p>为了组织好代码，我们通常会将不同的代码放到不同的文件夹中。先给“Hello, world!”创建一个文件夹 <code>hello_world</code>：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; mkdir hello_world
&gt; cd hello_world
</code></pre></div><p>现在，创建 Rust 的源代码文件，这里我管它叫 <code>hello_world.rs</code>。Rust 的源代码文件总是以 <code>.rs</code> 结尾，如果文件名包含不止一个单词，建议使用下划线（<code>_</code>）分隔。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
    println!(<span style=color:#e6db74>&#34;Hello, world!&#34;</span>);
}
</code></pre></div><p>这就是 Rust 版本的“Hello, world!”源代码，和 Java 比起来，简单了太多。下一步要做的就是编译源文件得到可执行文件，然后运行：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; rustc hello_world.rs
&gt; ./hello_world.exe
Hello, world!
</code></pre></div><p>到此，我们“Hello, world!”就全部完成了。</p>
<h2 id=hello-world-详解>Hello, world! 详解</h2>
<p>“Hello, world!” 虽然只有短短三行，但麻雀虽小，五脏俱全。它包含了一个简单 Rust 程序必要的组成部分。首先是</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {

}
</code></pre></div><p>这里定义了一个 Rust 函数。和很多编程语言一样，<code>main</code> 函数有着特殊的地位，它是 Rust 程序的执行入口。我们的“Hello, world!” 中的 <code>main</code> 函数是没有参数的，如果你需要参数，把它们放到 <code>()</code> 中即可。函数体被包裹在 <code>{}</code> 中，Rust 中习惯将 <code>{</code> 放在函数定义的同一行，中间用一个空格隔开。</p>
<blockquote>
<p>实际上，我们不需要过于在意代码的风格。因为 Rust 给我们提供了一个代码自动格式化工具——<code>rustfmt</code>，它是随着 Rust 的分发包一起发布的，也就是说，你的电脑上已经有它了。</p>
</blockquote>
<p>在 <code>main</code> 函数内部有一行代码：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust>    println!(<span style=color:#e6db74>&#34;Hello, world!&#34;</span>);
</code></pre></div><p>这行代码正是整个“Hello, world!”的核心部分，它将“Hello, world!”打印到了我们的屏幕上。它包含了四个值得我们注意的点：</p>
<ul>
<li>Rust style 的缩进是四个空格，而不是一个 TAB</li>
<li><code>println!</code> 调用了 Rust 宏（macro）。如果是调用普通函数的话，是没有后面那个 <code>!</code> 的，这就是调用宏与普通函数的区别</li>
<li><code>"Hello, world!"</code> 是一个字符串，我们将它作为参数传递给 <code>println!</code>，最终被输出到了屏幕上</li>
<li>代码上的末尾有一个 <code>;</code>，代表着当前表达式结束，它后面就是一个新的表达式了</li>
</ul>
<p>除了宏与函数外，剩余三个部分都和 Java 等编程语言类似。</p>
<h2 id=从编译到运行>从编译到运行</h2>
<p>Rust 是一种 <strong>预编译（ahead-of-time compiled）</strong> 语言，我们可以将编译出来的 Rust 程序直接交给别人，他们不需要安装 Rust 就可以直接运行。与 Python 和 JavaScript 等将编译和运行放在一起的动态语言不同，Rust 中编译和运行是分开的两个步骤。在“Hello, world!”中，我们先通过 Rust 的编译器 <code>rustc</code> 编译源代码：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; rustc hello_world.rs
</code></pre></div><p>在 Windows 上，如果编译成功，我们就会得到两个文件： <em>hello_world.exe</em>和 <em>hello_world.pdb</em>。其中，<em>hello_world.exe</em> 是 Windows 平台上的二进制可执行文件，<em>hello_world.pdb</em> 则是针对 Windows 创建的文件，它包含符号（symbol）、类型（type）和模块（module）等调试信息。<a href=https://docs.rs/pdb/0.7.0/pdb/>pdb</a> 即“Program Database”。</p>
<p>在 Linux 上，如果编译成功，则只会得到一个二进制可执行文件：<em>hello_world</em>。</p>
<p>不管是 Windows 上的 <em>hello_world.exe</em>，还是 Linux 上的 <em>hello_world</em>，我们都可以把它们直接放到另一台没有安装 Rust 的机器上运行。这就是 Rust 没有运行时（runtime）的具体体现。与之相对的 Java 语言就是一个很好的例子，我们先将 Java 的源代码文件 <code>.java</code> 编译成字节码文件 <code>.class</code>，再使用 <code>java</code> 命令运行编译字节码文件。这就要求目标机器上安装有 JRE（Java Runtime Environment）。</p>
<h2 id=cargo>Cargo</h2>
<p>如果程序很简单，使用 <code>rustc</code> 就能轻易应付。但是，随着项目的增长，项目的方方面面都需要被管理，这时 <code>rustc</code> 就难以胜任了。所以，Rust 给我们提供了一个工具——Cargo。<a href=https://doc.rust-lang.org/cargo/>Cargo</a> 是 Rust 的程序构建系统和包管理器，可以帮我们完成构建代码、下载依赖等任务。Cargo 之于 Rust 就像 Maven 或 Gradle 之于 Java。</p>
<p>默认情况下，安装 Rust 的时候也会一并安装 Cargo，我们可以通过以下命令检查 <code>cargo</code> 是否被正确安装：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; cargo --version
</code></pre></div><h3 id=使用-cargo-创建新项目>使用 cargo 创建新项目</h3>
<p>使用 cargo 创建新项目的操作尤为简单。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; cargo new hello_cargo
&gt; cd hello_cargo
</code></pre></div><p>在 <code>hello_cargo</code> 文件夹内，Cargo 默认为我们生成了 <code>.git</code> 目录和 <code>.gitignore</code>、源代码目录 <code>src</code> 以及 Cargo 的配置文件 <code>Cargo.toml</code>。源代码目录 <code>src</code> 里面有一个文件叫 <code>main.rs</code>，它的内容和前文的 <code>hello_world.rs</code> 一致。Cargo 期望所有的源代码文件都位于 <code>src</code> 目录内，项目的根目录中一般是配置文件、README、LICENSE 等与源代码无关的文件。</p>
<p>我们要重点关注的是 <code>Cargo.toml</code>，文件的内容如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[<span style=color:#a6e22e>package</span>]
<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;hello_cargo&#34;</span>
<span style=color:#a6e22e>version</span> = <span style=color:#e6db74>&#34;0.1.0&#34;</span>
<span style=color:#a6e22e>edition</span> = <span style=color:#e6db74>&#34;2018&#34;</span>

<span style=color:#75715e># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span>

[<span style=color:#a6e22e>dependencies</span>]
</code></pre></div><p><a href=https://toml.io/><code>.toml</code></a> 是一种文件格式，它通过片段（section）组织文件内容。我们的 <code>Cargo.toml</code> 就包含 <code>[package]</code> 和 <code>[dependencies]</code> 两个片段。其中，<code>[package]</code> 下面罗列的是当前包的配置信息，这里包括项目名称（name）、版本（version）和 Rust 版本（edition）；<code>[dependencies]</code> 下面罗列的则是项目的依赖。在 Rust 中，代码包被称为 crates。由于 <code>hello_cargo</code> 不需要任何依赖（crates），所以 <code>[dependencies]</code> 下面是空的。</p>
<h3 id=构建并运行-cargo-项目>构建并运行 Cargo 项目</h3>
<p>构建 Cargo 项目的命令是：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; cargo build
</code></pre></div><p>以 <code>hello_cargo</code> 为例，在 Windows 上执行 <code>cargo build</code> 之后，项目的根目录下会多出一个 <code>target</code> 文件夹和一个 <code>Cargo.lock</code> 文件。你会发现 <code>target</code> 下有一大堆文件，其中大部分文件都不是太重要，真正的可执行文件是 <code>target/debug/hello_cargo.exe</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>&gt; ./target/debug/hello_cargo.exe
Hello, world!
</code></pre></div><p><code>Cargo.lock</code> 是第一次运行 <code>cargo build</code> 才会创建的文件，Cargo 用它来跟踪项目中依赖的具体版本。这个文件仅仅是给 Cargo 自己使用的，我们不应该去编辑它。</p>
<p>除了先手动构建项目再手动运行可执行文件外，Cargo 还给我们提供了一条可以自动构建并运行可执行文件的命令——<code>cargo run</code>。</p>
<h3 id=使用-cargo-check-检查错误>使用 <code>cargo check</code> 检查错误</h3>
<p>Cargo 还给我们提供了一个叫 <code>cargo check</code> 的命令，它会分析当前包内的代码并报告错误，但并不会产生可执行文件。通常情况下，<code>cargo check</code> 的执行速度比 <code>cargo build</code> 要快得多。如果你经常在编写代码的过程中通过编译来检查代码问题，那么 <code>cargo check</code> 绝对会成为你加速开发的好帮手。很多 Rustaceans 都在编写代码的过程中定期运行 <code>cargo check</code>，确保代码可以正常编译。当他们准备好运行可执行文件时，才会使用 <code>cargo build</code>。</p>
<h3 id=profiles>profiles</h3>
<p>Cargo 给我们提供了两种 profile，用于不同场景下的程序构建：</p>
<ul>
<li>Default Profile：用于开发环境，<code>cargo build</code> 默认选项</li>
<li>&ndash;release Profile：用于发布项目，需要通过 <code>cargo build --release</code> 显式指出</li>
</ul>
<p>在开发过程中，我们通常希望编译尽可能快，这样我们能够更快地进行验证，所以 <code>cargo build</code> 默认会生成开发用过程使用的可执行文件。在我们使用 <code>cargo build --release</code> 构建发布项目时，Cargo 会在编译发布版本的过程中进行一系列优化。这些优化会使得你的 Rust 程序运行得更快，但是会消耗更多的编译时间。程序的最终用户通常希望程序运行尽可能地快，这正是是 <code>cargo build --realease</code> 花更多编译时间进行优化的原因。</p>
<p>不同 profile 构建出来的最终文件存放位置是不一样的。<code>cargo build</code> 编译出来的文件位于 <code>target/debug</code> 目录下，而<code>cargo build --release</code> 编译出来的文件位于 <code>target/release</code> 目录下。</p>
<h2 id=参考资料>参考资料</h2>
<ol>
<li>Steve Klabnik, Carol Nichols. <a href=https://doc.rust-lang.org/stable/book/>The Rust Programming Language</a>.</li>
</ol>
</div>
<footer class=entry-footer>
<div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg>
<span class=screen-reader-text>分类: </span><a class=category href=/categories/rust/>Rust</a></div>
<div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=screen-reader-text>标签: </span><a class=tag href=/tags/rust/>Rust</a></div>
</div>
</footer>
</article>
<nav class=entry-nav>
<div class=container><div class="next-entry sep-before">
<a href=/rust/rust_basics_variables_and_data_types/>
<span class=screen-reader-text>下一篇: </span>Rust 基础：变量与数据类型<span aria-hidden=true>下一个<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg>
</span>
</a>
</div></div>
</nav>
</main>
<footer id=footer class=footer>
<div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label=社交菜单>
<ul><li>
<a href=https://github.com/zhannicholas target=_blank rel="noopener me">
<span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</li><li>
<a href=https://t.me/zhannicholas target=_blank rel="noopener me">
<span class=screen-reader-text>Open Telegram account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23.91 3.79 20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72.0-.6-.27-.84-.95L6.3 13.7.85 12c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"/></svg>
</a>
</li><li>
<a href=mailto:zhan_nicholas@outlook.com target=_blank rel="noopener me">
<span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</a>
</li><li>
<a href=https://linkedin.com/in/%e4%bc%9f%e4%bc%9f-%e8%a9%b9-27871a104 target=_blank rel="noopener me">
<span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
</li></ul>
</nav>
</section><div class=copyright>
<p> &copy; 2018-2021 Nicholas Zhan </p>
</div>
</div>
</footer>
</div>
</div><script>window.__assets_js_src="/assets/js/"</script>
<script src=/assets/js/main.c3bcf2df.js></script><script src=/js/custom.js></script>
</body>
</html>